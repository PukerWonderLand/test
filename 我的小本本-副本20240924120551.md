



# --------------------💛工具库💛-------------------





## ♻️Chatgpt生成脚本的注意事项

1.一定要让gpt先测试一下生成的代码

2.符号一定要说清楚是中文全角还是半角

3.结果文本可能是对的，但是打印到cmd界面就不对了，比如tab缩进变成了很多的空格。建议可以直接将结果给到粘贴板，然后直接用就行了





## ⏳FPGA相关知识

#### 📍时钟

如果两个时钟之间的相位关系是明确的，那么就称这两个时钟是同步时钟

与同步时钟相对，所谓异步时钟是指时钟之间的相位关系无法确定

不可扩展时钟是指时钟引擎无法在1000个时钟周期内找到两个时钟边沿对齐的情形



## 🧩vivado

跑IP的时候可以启动多个核心来跑

文件名字不要有&，不要有.

因为会导致工程打不开的情况出现



#### 📍SPI约束

```
set_property BITSTREAM.GENERAL.COMPRESS TRUE [current_design]
set_property BITSTREAM.CONFIG.SPI_BUSWIDTH 4 [current_design] 
set_property BITSTREAM.CONFIG.CONFIGRATE 50 [current_design] 
set_property CONFIG_VOLTAGE 3.3 [current_design]
set_property CFGBVS VCCO [current_design]
```

```
set_property BITSTREAM.CONFIG.CONFIGRATE 50  [current_design]
write_bitstream -force top50.bit
set_property BITSTREAM.CONFIG.CONFIGRATE 40  [current_design]
write_bitstream -force top40.bit
set_property BITSTREAM.CONFIG.CONFIGRATE 33  [current_design]
write_bitstream -force top30.bit
set_property BITSTREAM.CONFIG.CONFIGRATE 26  [current_design]
write_bitstream -force top20.bit
set_property BITSTREAM.CONFIG.CONFIGRATE 22 [current_design]
write_bitstream -force top10.bit
set_property BITSTREAM.CONFIG.CONFIGRATE 16 [current_design]
write_bitstream -force top.bit 
set_property BITSTREAM.CONFIG.CONFIGRATE 12 [current_design]
write_bitstream -force top12.bit 
set_property BITSTREAM.CONFIG.CONFIGRATE 9 [current_design]
write_bitstream -force top10.bit  
```





#### 📍时序约束

###### ❄️要求cell放在某个区域里

==设置这个区域的范围（他会自动到齐到slice的，所以位置随便写）==

```
create_pblock pblock_1
resize_pblock pblock_1 -add {SLICE_X171Y351:SLICE_X219Y447}
```

> WARNING: [Vivado 12-4775] These ranges will be aligned to a tile boundary: SLICE_X171Y351
>
> 含义： 这条警告是指你指定的Pblock范围（`SLICE_X171Y351:SLICE_X219Y447`）会自动调整到tile（瓦片）边界。
>
> 这是Vivado在内部对Pblock范围进行调整，以确保Pblock范围与底层硬件的逻辑tile边界对齐。

==将这些cell放进去==

```
add_cells_to_pblock pblock_1 [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]}]
add_cells_to_pblock pblock_1 [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]_rep}]
add_cells_to_pblock pblock_1 [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]_rep__0}]
add_cells_to_pblock pblock_1 [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]_rep__1}]
add_cells_to_pblock pblock_1 [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[5]}]
```

==删除cell已经有的所有时序约束==

```
reset_property LOC [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]}]
reset_property LOC [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]_rep}]
reset_property LOC [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]_rep__0}]
reset_property LOC [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[4]_rep__1}]
reset_property LOC [get_cells {G_PCIE_CORE.SP37_PCIE3_0.pcie_spu_inst/U_SP37_EP_APP/U_SP37_EP_RC_REORDER/s_state_wr_reg[5]}]
```

==删除已经有的区域==

```
delete_pblock pblock_1
```



#### 链接notepad++的代码

```
C:/Need-Soft/Notepad++/notepad++.exe [file name]
```





#### 可以直接在文件里看的报告





###### 直接看==利用率==

综合的利用率

```
top_utilization_synth.rpt
```

布局布线的利用率

```
top_utilization_placed.rpt
```



###### 查看工程==运行日志==

```
xdma_0_ex.runs\impl_2\runme.log
```

```
xdma_0_ex.runs\impl_2\runme.log
```



###### 直接看==时钟==的利用率


布局布线-布线，时钟利用报告

```
top_clock_utilization_routed.rpt
```



###### 直接看==端口==的使用情况

布局布线-放置IO端口的报告

```
top_io_placed.rpt
```



###### 直接看==电源==的报告

布局布线-布线，电源使用情况报告

```
top_power_routed.rpt
```







1











## 💻Windows的CMD命令行操作

#### 📍生成文件夹的结构，用树的结构

```
tree /f /a "D:\0-desktop\代码调用测试"
```

```
其中 
/f 参数表示显示文件名
/a 参数表示包括所有文件和文件夹，包括隐藏的文件和空文件夹
```

```
tree 路径
```

这个会列出所有的子目录（递归）



windows查看当前文件夹的内容

```
powershell -Command "Get-ChildItem -Force | Sort-Object PSIsContainer,Extension | Format-Table -Property Name, @{Name='Size';Expression={[math]::round($_.Length / 1KB, 2)}} -AutoSize"

```

#### 📍生成文件夹的结构，可以规定搜索层级

```
function Show-ChineseTree {
    param (
        [string]$Path = ".",
        [int]$MaxDepth = 3,
        [int]$CurrentDepth = 1,
        [string]$Prefix = ""
    )

    # 如果当前深度超过最大深度，停止递归
    if ($CurrentDepth -gt $MaxDepth) {
        return
    }

    $items = Get-ChildItem -Path $Path | Where-Object { $_.Name -match '[\p{IsCJKUnifiedIdeographs}]' }
    $itemsCount = $items.Count

    for ($i = 0; $i -lt $itemsCount; $i++) {
        $item = $items[$i]
        $connector = if ($i -eq $itemsCount - 1) { "└──" } else { "├──" }
        $subPrefix = if ($i -eq $itemsCount - 1) { "    " } else { "│   " }

        # 显示带有连接线的目录或文件名
        Write-Host "$Prefix$connector $($item.Name)"

        # 如果是目录，递归调用函数
        if ($item.PSIsContainer) {
            Show-ChineseTree -Path $item.FullName -MaxDepth $MaxDepth -CurrentDepth ($CurrentDepth + 1) -Prefix "$Prefix$subPrefix"
        }
    }
}

# 提示用户输入路径
$folderPath = Read-Host "请输入要搜索的文件夹路径"

# 调用函数，使用用户输入的路径和最大深度
Show-ChineseTree -Path $folderPath -MaxDepth 3

```

**==需要修改层级的话，在最后一行改==**







#### 📍查看文件夹的结构

**`-a`**：显示所有文件，包括隐藏文件（以 `.` 开头的文件）。

**`-h`**：与 `-l` 结合使用，以人类可读的格式显示文件大小（如 KB、MB）。

**`-S`**：按文件大小排序，最大的文件排在最前面。

**`-1`**：每行只显示一个文件名称。

**`| sort -k 1,1`** : 并按文件类型（文件权限字符串的第一个字符）进行排序

```
ls -al1h | sort -k 1,1
```



###### ==查看某个路径下的文件，不包含文件夹==

```
for /F "tokens=*" %i in ('dir /B /A:-D "\\192.168.209.209\autumn\EDA_SPU_Spyglass_2024.5.6"') do @echo %i
```





#### 📍查看最近的开机记录

```
wevtutil qe System /q:"*[System[(EventID=6005) or (EventID=6006)]]" /f:text /rd:true
```



## 🖥Linux的相关操作



1. - 



#### 📍CentOS7设置中文

进入这个语言设置

```
vim /etc/locale.conf
```

将

```
LANG=en_US.UTF-8
```

改成

```
LANG=zh_CN.UTF-8
```

<img src="我的小本本.assets/Snipaste_2024-05-06_10-05-06.png" alt="Snipaste_2024-05-06_10-05-06" style="zoom:50%;" />

<img src="我的小本本.assets/Snipaste_2024-05-06_10-05-12.png" alt="Snipaste_2024-05-06_10-05-12" style="zoom:50%;" />

<img src="我的小本本.assets/Snipaste_2024-05-06_10-05-18.png" alt="Snipaste_2024-05-06_10-05-18" style="zoom:50%;" />



#### 📍Linux设置大号字体

<img src="我的小本本.assets/Snipaste_2024-05-06_10-23-19.png" alt="Snipaste_2024-05-06_10-23-19" style="zoom:50%;" />





#### 📍打开Linux虚拟机的共享文件夹服务

这个在visio文件里面说了



#### 📍生成文件列表

```
find . -name '*.vhd' > filelist.f
```







## 💻Nano编辑内容

进入 Nano 编辑器

您已经在 Nano 编辑器中（根据您提供的截图），现在只需要将内容粘贴进去。

粘贴内容

在 Nano 编辑器中，可以使用右键菜单或键盘快捷键来粘贴内容：

右键粘贴：在 Git Bash 中，您可以尝试右键单击以粘贴内容。

```
键盘快捷键：使用 Shift + Insert 组合键粘贴内容。
```

保存文件

粘贴完成后，按以下步骤保存文件并退出 Nano：

```
按 Ctrl + O（Write Out）保存文件。
```

按 Enter 确认文件名。

```
按 Ctrl + X（Exit）退出 Nano 编辑器。
```



## 💻Vim编辑内容

#### 📍基本操作

1. **进入编辑模式**：
   - 按 ==i 进入插入模式==，这样可以修改或输入新的文本。

该错误消息表示文件是只读的，无法直接保存。要覆盖保存可以按如下步骤操作：

1. ==按 `Esc` 键确保处于命令模式==。

2. 输入 

   ==注意前面有个冒号：==

   ```
   :wq!
   ```

    然后按 

   ```
   Enter
   ```

    保存并退出：

   - `:w` 表示“写入”（保存文件）。
   - `:q` 表示“退出”。
   - `!` 表示强制执行。

## 🐉Git 的一些错误事项

#### 📍如果切换到目标分支会将当前没有被追踪的文件覆盖的话，他也不能切换

```
git init
```





## 🐉Git Bash的命令

1. **Bash Shell**：Git Bash 提供了一个 Bash shell，可以运行 Bash 脚本和常见的 Unix 命令。

Git Bash 在 Windows 上运行时，提供了一个类似于 Unix/Linux 环境的命令行接口，但它并不是一个完整的 Linux 环境。它使用一个名为 MinGW (Minimalist GNU for Windows) 的工具集，这个工具集包括了许多常见的 Unix 工具和 shell 程序（如 Bash shell），使 Windows 用户能够使用类似于 Unix/Linux 的命令和脚本。





#### 📍建立版本库

```
git init
```







#### 编码相关的问题解决

```
git config --global i18n.commitencoding utf-8
git config --global gui.encoding utf-8 
git config --global i18n.logoutputencoding utf-8
```



q [qu]

#### 📍基本操作

###### ❄️退出当前正在执行的命令(点错了需要很长时间那种)

```
ctrl+c
```

###### ❄️地址输入（单引号）

```
cd 'C:\Users\YourName\Documents'
```

###### ❄️清屏

在 Git Bash 中，您还可以使用快捷键 `Ctrl + L` 来清空屏幕。这与 `clear` 命令的效果相同。

```
git checkout -b sm2_dev_ntb origin/sm2_dev_ntb
```

真正的清屏，所有信息删掉

```
clear
```

###### ❄️删除未跟踪的文件：

```
git clean -f
```

###### ❄️删除目录

```
git clean -fd
```





###### ❄️存储、冷藏修改

```
git stash
```

```
git stash save "2024年8月6日 17:45:46"
```





```
git stash save "2024年8月6日 17:48:41"
git stash apply
```



fix（top）：从SP37的PCIE模块引出user_init_done_o信号，以此作为s_init_done、c_init_done信号来源，并将这两个信号同步后给到各自对应的host_user_lnk_up_i

fix（xilinx_pcie_3_0_7vx_ep）：引出user_init_done_o信号



bitfiles（240611）：生成的下载文件，尚未验证

###### ❄️忽略文件

![Snipaste_2024-08-06_15-57-39](我的小本本.assets/Snipaste_2024-08-06_15-57-39.png)





#### 📍查看分支情况

###### **❄️列出所有本地分支**

```
git branch
```



###### ❄️查看远端所有分支

```
git branch -r
```



###### ❄️查看远端和本地的所有分支

```
git branch -a
```







```
git clone http://192.168.209.5/gitlab/qiongyu/fpga_hdl_tool.git fpga_hdl_tool
```

```
git clone http://192.168.209.5/gitlab/nereus_fpga/spug_fpga.git SPUG
```



#### 📍下载库相关



```
E:\Work_SPU\SPU_Soft_python_code
```



###### ❄️下载机密计算SPU代码库（同时建立git本地仓库）

```
git clone http://192.168.209.5/gitlab/nereus/tools.git tool
```



```
git clone http://192.168.209.5/gitlab/qiongyu/fpga_spu.git sim_library
```

```
git clone http://192.168.209.5/gitlab/qiongyu/fpga_spu.git sim_code_library
```

代码检查工具库

```
git clone http://192.168.209.5/gitlab/qiongyu/fpga_hdl_tool.git fpga_hdl_tool
```

SM4——GCM128的

```
git clone http://192.168.209.5/gitlab/qiongyu/fpga_spu.git sm4
```



###### ❄️获取**==最新的==**所有远程分支信息

```
git fetch --all
```

不会修改当前工作目录的内容。

它只会更新本地的远程分支（如 `origin/main`），

而不会将这些更改合并到当前分支

```
git pull --all
```

从远程仓库获取最新的对象和引用，并将这些更改合并到当前分支。

它实际上是 `git fetch` 和 `git merge` 的组合



###### ❄️🍟创建**==所有远端的分支==** 创建本地分支并跟踪远程分支

```
for branch in $(git branch -r | grep -v '\->'); do
    git branch --track ${branch#origin/} $branch
done
```



###### ❄️🍟自动下载所有的远端分支到本地

```
for branch in $(git branch | sed 's/\*//'); do
    git checkout $branch
    git pull
done
```



切换分支





#### 📍下载分支相关



###### ❄️==选择切换分支脚本==

在.bashrc文件里面需要增加的

```
branch-select() {
    branches=$(git branch | sed 's/^..//')
    PS3="选择要切换的分支: "
    select branch in $branches; do
        if [ -n "$branch" ]; then
            branch=$(echo $branch | xargs)  # 去除前后空格
            git switch "$branch"
            break
        else
            echo "无效选择，请重新选择。"
        fi
    done
}
```

然后更新配置

```
source ~/.bashrc
```

然后开始调用这个脚本

```
branch-select
```

然后输入序号就行了

```
99245@PukeurR9000P MINGW64 /d/Work_SPU/under_Git_control/check_repo (sm2_dev_ntb)
$ branch-select
1) main                 5) sm2_dev_gcm128      9) sm2_dev_sto_sm4    13) sp37_dev           17) xdma_dev
2) ntb_test2            6) sm2_dev_ntb        10) sm2_dev_storage    14) spu_intel
3) sm2_dev              7) sm2_dev_p2p        11) sm2_ku15p_dev      15) test_ku15p
4) sm2_dev_cyphmc       8) sm2_dev_sto_merge  12) sm4_test           16) test_recovery
选择要切换的分支: 1
Updating files: 100% (494/494), done.
Switched to branch 'main'
Your branch is up to date with 'origin/main'.
```





#### 📍查看提交历史



###### ❄️展示分支graphy和Commit

**`--graph`**：显示 ASCII 图形表示提交历史。

**`--oneline`**：每个提交显示一行，显示简短的提交哈希和提交信息。

**`-n <number>`**：只显示最新的 `<number>` 个提交。

**`--author=<pattern>`**：只显示由指定作者的提交。

**`--grep=<pattern>`**：显示提交信息中包含指定模式的提交。

**`-p`**：显示每个提交的差异。

==可以指定要看某两个提交之间的差异吗？==

**`--name-status`**：显示每个提交修改的文件名及状态（新增、修改、删除）。

**`--abbrev-commit`**：使用缩短的提交哈希。

**`-all`**：查看所有的分支

**推荐使用下面这个：**

```
git log --graph --abbrev-commit --all  
```

```
git log --graph --abbrev-commit --all --oneline
```

哈希值  日期   作者   commit信息

```
git log --graph --all --pretty=format:"%h %ad %an %s" --date=format:"%Y-%m-%d %H:%M:%S"
```

仅仅查看某个分支

```
git log  sm2_dev_up&down_HG  --graph --abbrev-commit   
```



###### ❄️只看所有commit但是没分支图看

```
git log
```

简洁的

```
git log --oneline
```

查看详细的信息

```
git log --pretty=full
```

查看每个的差异

```
git log -p
```

```
git log --stat
```



###### ❄️查看最新的五个分支

```
git for-each-ref --sort=-committerdate refs/heads/ --format='%(refname:short)' | head -n 5
```

查看最新的五个分支里的五个commit

```
git for-each-ref --sort=-committerdate refs/heads/ --format='%(refname:short)' | head -n 2 | xargs -I {} git log --oneline -10 {}
```



###### **❄️在提交信息中搜索关键词**：

```
git log --grep="feat"
```

搜索包含feat的提交信息的commit的脚本，方便看看多了什么功能

```
# 查找包含关键词 "feat" 的提交
git log --all --pretty=format:"Commit: %h%nDate: %ad%nAuthor: %an%nMessage: %s" --date=format:'%Y-%m-%d %H:%M:%S' | grep -B 3 -A 1 "Message: feat" | while read line; do
    # 如果是提交行，提取提交哈希值
    if [[ $line == Commit:* ]]; then
        commit_hash=$(echo $line | awk '{print $2}')
        echo "$line"
        # 查找包含该提交的分支，并格式化输出
        branches=$(git branch --contains $commit_hash | sed 's/^/  /')
        echo "Branches:"
        echo "$branches"
    else
        echo "$line"
    fi
done
```



###### **❄️在提交信息和提交内容中搜索关键词**：

```
git log -S "关键词"
```







###### ❄️查看commit之间的差异

根据哈希值来确定

```
git diff 07384b4 c2554ae
```



git diff  7b36175  445af20

==这个git diff可以啊，可以直接调用来看任何文件的==

![Snipaste_2024-06-04_11-26-06](我的小本本.assets/Snipaste_2024-06-04_11-26-06.png)

























​	



#### 📍一些补充工具

###### ❄️自动删除除了指定的stash以外的stash

```

```

```

```







#### 📍Stash存储相关的工具



###### ❄️指定删除

```
#!/bin/bash

# 获取所有的stash列表并反向排序

stashes=$(git stash list | awk -F: '{print $1}' | tac)

# 指定要保留的stash

keep="stash@{0}"

for stash in $stashes
do
  if [ "$stash" != "$keep" ]; then
    git stash drop "$stash"
  fi
done

echo "Finished deleting all stashes except $keep."
```





#### 📍标签相关的



###### ❄️给TAG重命名

```
# 函数：列出所有的标签并允许用户选择
select_tag() {
    tags=($(git tag)) # 获取所有标签并存入数组
    if [ ${#tags[@]} -eq 0 ]; then
        echo "当前仓库没有标签。"
        return 0
    fi

    echo "当前所有标签："
    for i in "${!tags[@]}"; do
        echo "$i) ${tags[$i]}"
    done

    echo "请输入序号选择一个标签进行重命名（输入 'end' 退出）："
    read index

    if [ "$index" == "end" ]; then
        echo "退出重命名流程。"
        return 0
    elif ! [[ "$index" =~ ^[0-9]+$ ]] || [ "$index" -ge "${#tags[@]}" ]; then
        echo "无效的序号，请重新选择。"
        select_tag
    else
        current_tag=${tags[$index]}
        echo "选中的标签是: $current_tag"
        rename_tag "$current_tag"
    fi
}

# 函数：重命名标签
rename_tag() {
    old_tag=$1
    echo "请输入新标签名："
    read new_tag

    if [ -z "$new_tag" ]; then
        echo "新标签名不能为空，请重新输入。"
        rename_tag "$old_tag"
    else
        # 先创建新的标签
        git tag "$new_tag"
        # 确保新标签创建成功后再删除旧的标签
        if [ $? -eq 0 ]; then
            git tag -d "$old_tag"
            echo "本地标签已成功重命名为: $new_tag"
        else
            echo "创建新标签失败，请重试。"
        fi
    fi

    # 回到标签选择
    select_tag
}

# 开始脚本
select_tag

```

```
select_tag
```





## 🐉Git 忽略的命令



```
*.runs/
匹配所有名字以 .runs 结尾的目录（注意是目录，而不是文件）
要特别注意的是，在 .gitignore 中，带有 / 结尾的规则通常是针对目录的，而没有 / 的规则则既可以匹配文件也可以匹配目录。
```





```
像 !/*.xpr 这样的规则只匹配项目根目录下的 .xpr 文件，而不会匹配子文件夹中的 .xpr 文件
```



```
如果您想匹配所有子目录中的这些文件，需要移除开头的斜杠 /，像这样：
!*.xpr
!*.cfg
```





```
!bit_files/
这个规则只针对项目根目录下的 bit_files/ 目录起作用，不会影响其他子目录中名为 bit_files 的目录。
```



```
!**/bit_files/
这会匹配并跟踪项目中任何层级下的 bit_files/ 目录。
```







#### 公司代码库的忽略文件：

```

/*


#根目录的忽略设置
!/.gitignore
!/*.xpr
!/*.cfg
!/*.tcl
!/*.txt
!/*.md
!/*.bat


#根目录的忽略设置
!bit_files/
!doc/
!tools/


#只保留部分IP文件
!*.srcs/
*.srcs/sources_1/ip/*/*
!*.srcs/sources_1/ip/*/*.xci
!*.srcs/sources_1/ip/*/*.prj
!*.srcs/sources_1/ip/*/*.tcl


#保留仿真文件
!*.srcs/sim/behav/*
!*.srcs/sim/behav/active/top_sim/
*.srcs/sim/behav/active/top_sim/log/
*.srcs/sim/behav/active/top_sim/top_sim/
*.srcs/sim/behav/active/top_sim/src/*.*

/*.srcs/sim/behav/modelsim/*
!/*.srcs/sim/behav/modelsim/*/
/*.srcs/sim/behav/modelsim/modelsim_lib/*
!/*.srcs/sim/behav/modelsim/*.txt
!/*.srcs/sim/behav/modelsim/*.do
!/*.srcs/sim/behav/modelsim/*.bat


#保留实现后bit文件
!sapar/
!sapar/*/*.runs/*/*.bit
!sapar/*/*.runs/*/*.ltx

sapar/*/*.sim/
sapar/*/ip_patch/
sapar/*/*.cache/
sapar/*/*.hw/
sapar/*/*.ip_user_files/
sapar/*/*.runs/*/*
```

































## 💽正则表达式库



#### 📍模块端口多信号的问题

```
.*=>.*\b(?:and|or|not)\b.*
```

```
.*=>.*(?:\band\b|\bor\b|\bnot\b|&).*
```

![Snipaste_2024-05-06_15-53-32](我的小本本.assets/Snipaste_2024-05-06_15-53-32.png)



#### 💚直接将所有的模块调用搜索出来，方便分析模块

```
^.*\w+\s+:\s+\w+(?!.*;)$
```







#### 📍直接将空白的行删掉

```
^\s*$\r\n
```

#### 📍专门用来查看ila的调用

```
^(?=.*ila)(?!.*--)(?!.*/)(?!.*#)(?!.*component)(?!.*,)(?!.*;).*
```

#### 📍专门用来查看vio的调用

```
^(?=.*ila)(?!.*--)(?!.*/)(?!.*#)(?!.*component)(?!.*,)(?!.*;).*
```

#### 📍用来查看.vhd的编码是不是都是GB2312

```
^(?=.*\.vhd)(?!.*GB2312).*
```

#### 📍在GBK编码下搜索全部的中文

```
[\x{4E00}-\x{9FA5}\x{F900}-\x{FA2D}\x{FE30}-\x{FE4F}]
```

#### 📍用来删除掉所有不包含中文的注释行（一般就是废弃的代码）

```
^\s*--(?!\s*[\x{4E00}-\x{9FA5}\x{F900}-\x{FA2D}\x{FE30}-\x{FE4F}]).*
```

这里重点就是`(?!\s*`后面要加上一个\s不然表达式就变成了，--后面第一个字符就来判断是不是等于中文了

#### 📍用来直接将赋值语句放到when后面，处于一行方便查看

```
(?<=When....)=>.*$\r\n.*\s*(?=s_)
```

两个（）里面是断言的东西



```
(?<=;)\s*\r\n\s*(?=end)
```



```
	
--生成一个5分钟的延时
process(clk_i, nrst_i)
begin
    if(nrst_i = '0') then

		cnt1   <= (others => '0');
		cnt2   <= (others => '0');
		delay_5min_done <= '0';
		
    elsif(clk_i'event and clk_i = '1') then

        if cnt1 >= 572204 and delay_5min_done = '0' then
		
            cnt1 <= (others => '0');
			
            if cnt2(15) = '1' then
                delay_5min_done <= '1';
            else
                cnt2 <= cnt2 + '1';
				delay_5min_done <= delay_5min_done;
            end if;
			
        elsif  delay_5min_done = '1' then
			delay_5min_done <= delay_5min_done;
			
		else
			cnt1 <= cnt1 + '1';
        end if;
		
    end if;
end process;

```





#### 📍用来检查仿真波形脚本的结构

```
(-noupdate\s*-expand\s*-group|结构：)
```







## 🧾VHDL代码跟verilog的区别





#### 📍声明的区别

- 模块调用的时候没有component确实不好定位。。。

- 也没有模块调用之前的声明

verilog可以在任何地方定义信号，只要在使用前定义就行

统一进行信号定义的话，赋值语句的排列顺序就可以随心所欲了，不然需要总是想着这个没定义，那个没定义的





这个用来匹配verilog的模块定义是最好不过了

```
\s*\(\R\s*\.\S*\s*,?
```





#### 📍语法的区别

if else的语法复杂了，verilog



VHDL里

 signal dly_cnt    : std_logic_vector(31 downto 0);

dly_cnt >= 100000 

这种std_logic_vector信号只能用>=的标志符号

dly_cnt + '1'

加一也只能用这种1来加



更烦的是这种

    vdd_ss_s5_en_f_dly_1ms_inst : sig_dly
    generic map(
        SIG_W => 1,   -- 处理的位宽
        DLY_V => 1,   -- 延迟的时间
        SCALE => "ms" -- 时间尺度
    )
    port map(
        sys_clk  => clk_i,
        sys_rstn => rstn_i,
        sig_in   => VDD_SS_S5_EN_F,
        dly_out  => vdd_ss_s5_en_f_dly_1ms
    );

一定得用std_logic_vector来接入，哪怕是0 downto 0！！！！！



烦死咯，**==VHDL对位宽要求太高了==**！！！！！！！！！！！！！！

对对对

​       sig_in   => vdd_sig_and_r2(0),

这种两边都是std_logic_vector(0 downto 0);的，是不用加个（0）的







## 🧾Python简单语法



##### 注释

```
# 注释：用于单行注释，适合简短说明。
""" 或 ''' 注释：用于多行注释或文档字符串，可以包含多行文字。
```

.split()

.strip()







## 🛠  软件的使用技巧

#### 📍beyond compare软件

<img src="我的小本本.assets/Snipaste_2024-05-15_16-41-33.png" alt="Snipaste_2024-05-15_16-41-33" style="zoom:50%;" />









#### 📍滴答清单



这个很舒服：

1.先在清单管理页面，查看收集箱里的任务，拉到左边的列表里进行分类

2.在各个单独的列表里设置好优先级

3.然后在日历安排任务的时候，设置一下按优先级分类，这样就可以快速安排每个清单里重要的事情了，很好

<img src="我的小本本.assets/Snipaste_2024-05-20_10-27-40.png" alt="Snipaste_2024-05-20_10-27-40" style="zoom:50%;" />





如果当天没完成的话，就全部拉到旁边的收集箱里

**==定期整理分类收集箱里的任务==**



###### 在任务视图快速整理，任务所属清单

![Snipaste_2024-07-02_17-50-34](我的小本本.assets/Snipaste_2024-07-02_17-50-34.png)



###### 快速清除多个任务的日期

![Snipaste_2024-07-02_17-49-22](我的小本本.assets/Snipaste_2024-07-02_17-49-22.png)



###### 在日历视图，看清单列表安排任务

![Snipaste_2024-07-02_17-51-31](我的小本本.assets/Snipaste_2024-07-02_17-51-31.png)









# 机密计算公司的一些随时要用的东西



#### Host主机相关的命令



##### 账户密码

```
test/idea12#$
```



##### 进入ROOT用户

```
sudo su root
```





##### 查看PCIE的状态

```
systemctl status host_pcs
```

```
systemctl status host_pcied
```





##### 去到PCIE写SN号功能的文件夹

```
cd /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0
sudo sh -c 'echo 2024045AE9CCCC > spu_set_sn'
```

##### 调用写SN号功能

```
sudo sh -c 'echo 2024045AE9F42B > spu_set_sn'
```



##### 读SN号功能

```
cd ~/code/product
sudo ./programer_helper --sn_show 8
```







#### 各种下载Flash速度的记录

##### SPUG

```
SPIx4 512 13分钟下载完成
```



1

#### 不同板子的Flash型号

```
1q2w#E$R
```



##### 690T的Flash型号（调试小板大排针版本）

```
mt25qu256
```



##### 690T的Flash型号（小排针新版本）

```
gd25lb256e
```



##### SPU-G的FLash型号

```
mt25qu512
```



##### 英特尔的板子

```
mt25qu512
```

1



#### ==700T芯片的ID==

```
02291143
```



#### filelist所有的文件目录

```
./src/top.vhd
./src/aes/aes_add_round_key.vhd
./src/aes/aes_block_buffer.vhd
./src/aes/aes_data_key_sync.vhd
./src/aes/aes_decrypt.vhd
./src/aes/aes_encrypt.vhd
./src/aes/aes_encrypt_top.vhd
./src/aes/aes_inv_mix_columns.vhd
./src/aes/aes_inv_sbox.vhd
./src/aes/aes_inv_shift_rows.vhd
./src/aes/aes_inv_sub_bytes.vhd
./src/aes/aes_key_expansion.vhd
./src/aes/aes_key_manage.vhd
./src/aes/aes_mix_columns.vhd
./src/aes/aes_multi_key_expansion_ctrl.vhd
./src/aes/aes_pdata_combine.vhd
./src/aes/aes_pdata_ctrl.vhd
./src/aes/aes_round_key_buffer.vhd
./src/aes/aes_sbox.vhd
./src/aes/aes_shift_rows.vhd
./src/aes/aes_sub_bytes.vhd
./src/aes128/aes128_add_round_key.vhd
./src/aes128/aes128_add_round_key_2.vhd
./src/aes128/aes128_data_key_sync.vhd
./src/aes128/aes128_encrypt.vhd
./src/aes128/aes128_encrypt_misc.vhd
./src/aes128/aes128_encrypt_top.vhd
./src/aes128/aes128_key_expansion.vhd
./src/aes128/aes128_key_manage.vhd
./src/aes128/aes128_mix_columns.vhd
./src/aes128/aes128_multi_key_expansion_ctrl.vhd
./src/aes128/aes128_package.vhd
./src/aes128/aes128_round_key_buffer.vhd
./src/aes128/aes128_sbox.vhd
./src/aes128/aes128_shift_rows.vhd
./src/aes128/aes128_sub_bytes.vhd
./src/aes128/aes8_sbox.vhd
./src/basic_component/basic_config.vhd
./src/basic_component/basic_definition.vhd
./src/basic_component/counter_ex.vhd
./src/basic_component/data_process_utils_package.vhd
./src/basic_component/edge_tick.vhd
./src/basic_component/fifo.vhd
./src/basic_component/fifo_2.vhd
./src/basic_component/fifo_ctrl.vhd
./src/basic_component/fifo_ctrl_2.vhd
./src/basic_component/fifo_ctrl_h.vhd
./src/basic_component/fifo_data_block.vhd
./src/basic_component/pulse_ext.vhd
./src/basic_component/ram_reg.vhd
./src/basic_component/ram_reg_2.vhd
./src/basic_component/reg_tmr.vhd
./src/basic_component/reset_gen.vhd
./src/basic_component/tick_generator.vhd
./src/basic_component/timer_pulse_with_enable.vhd
./src/basic_component/unique_res_arbitrator.vhd
./src/basic_component/v_filter_2.vhd
./src/gcm/gcm256_ad.vhd
./src/gcm/gcm256_ad_flow_ctrl.vhd
./src/gcm/gcm256_ae.vhd
./src/gcm/gcm256_ae_flow_ctrl.vhd
./src/gcm/gcm256_ae_misc.vhd
./src/gcm/gcm256_ghash.vhd
./src/gcm/gcm_block_product.vhd
./src/gcm/gcm_block_product_c.vhd
./src/gcm/gcm_block_product_zv.vhd
./src/gcm/gcm_ghash.vhd
./src/gcm/gcm_h_buf.vhd
./src/gcm/gcm_j0_buf.vhd
./src/info_req/info_inquire.vhd
./src/ms/ddr3_mux2.vhd
./src/ms/ms_test_2.vhd
./src/ms/protocal_ms_test_host.vhd
./src/protocol/protocol_c2s_256.vhd
./src/protocol/protocol_ciph_data_buf.vhd
./src/protocol/protocol_data2c.vhd
./src/protocol/protocol_data2s.vhd
./src/protocol/protocol_data_block_buf.vhd
./src/protocol/protocol_data_head_buf.vhd
./src/protocol/protocol_gcmaes_h_buf.vhd
./src/protocol/protocol_s2c_256.vhd
./src/pwm_fan/pwm_fan_speed_ctrl.v
./src/pwr_init/cpu_power_init.v
./src/pwr_init/hg_cpu_pwr_ctrl.vhd
./src/pwr_init/sig_dly.v
./src/pwr_init/sig_filter.v
./src/recovery/recovery_ctrl.vhd
./src/sec/i2c_master.v
./src/sec/m24c64_ctrl.v
./src/sec/sec_flash_intf.v
./src/session/session_id_manage.vhd
./src/session/session_id_manage_misc.vhd
./src/session/session_id_manage_sc.vhd
./src/sm2_if/sm2_service_top.v
./src/sm2_if/fifo/fifo_address_gray.v
./src/sm2_if/fifo/fifo_address_gray_pipelined.v
./src/sm2_if/fifo/fifo_address_sync.v
./src/sm2_if/fifo/sync_bits.v
./src/sm2_if/key_management/key_manage_top.vhd
./src/sm2_if/key_management/spug_key_ext_io.vhd
./src/sm2_if/key_management/spu_key_management.vhd
./src/sm2_if/misc/axi_lite_reg.v
./src/sm2_if/misc/sm2_mux.v
./src/sm2_if/persistent_storage/eeprom_p24c256b.vhd
./src/sm2_if/persistent_storage/persis_storage_buf.vhd
./src/sm2_if/persistent_storage/persis_storage_inf.vhd
./src/sm2_if/sm2/add_point.v
./src/sm2_if/sm2/dot_multiply.v
./src/sm2_if/sm2/key_gen.v
./src/sm2_if/sm2/mod_add.v
./src/sm2_if/sm2/mod_inv.v
./src/sm2_if/sm2/mod_inv_mult.v
./src/sm2_if/sm2/mod_mult.v
./src/sm2_if/sm2/mod_sub.v
./src/sm2_if/sm2/shift_dly.v
./src/sm2_if/sm2/sm2_decrypt.v
./src/sm2_if/sm2/sm2_sign.v
./src/sm2_if/sm2_service/dp_mem.v
./src/sm2_if/sm2_service/pcie2sm2_adapter.v
./src/sm2_if/sm2_service/rand_num_if.vhd
./src/sm2_if/sm2_service/sm2_service_ctrl.v
./src/sm2_if/sm2_service/sp37_ep_sm2_chn_tx.vhd
./src/sm2_if/sm2_service/util_axis_adapter.v
./src/sm2_if/sm3/sm3_compress.v
./src/sm2_if/sm3/sm3_msg_extend.v
./src/sm2_if/sm3/sm3_msg_fill.v
./src/sm2_if/sm3/sm3_unit.v
./src/sm4/sm4_ck_get.vhd
./src/sm4/sm4_encrypt.vhd
./src/sm4/sm4_encrypt_top.vhd
./src/sm4/sm4_key_expansion.vhd
./src/sm4/sm4_round.vhd
./src/sm4/sm4_sbox.vhd
./src/sm4/sm4_t_transform.vhd
./src/sp37/sp37_ep/sp37_ep_app_2.vhd
./src/sp37/sp37_ep/sp37_ep_bar_bus.vhd
./src/sp37/sp37_ep/sp37_ep_bar_reg_2.vhd
./src/sp37/sp37_ep/sp37_ep_cfg_mgmt.vhd
./src/sp37/sp37_ep/sp37_ep_completer.vhd
./src/sp37/sp37_ep/sp37_ep_ext_reg.vhd
./src/sp37/sp37_ep/sp37_ep_intr_ctrl.vhd
./src/sp37/sp37_ep/sp37_ep_misc.vhd
./src/sp37/sp37_ep/sp37_ep_msix_ctrl.vhd
./src/sp37/sp37_ep/sp37_ep_ms_chn_master_3.vhd
./src/sp37/sp37_ep/sp37_ep_ms_chn_slave_3.vhd
./src/sp37/sp37_ep/sp37_ep_ms_request_queue_2.vhd
./src/sp37/sp37_ep/sp37_ep_package.vhd
./src/sp37/sp37_ep/sp37_ep_prot_chn_rx_2.vhd
./src/sp37/sp37_ep/sp37_ep_prot_chn_tx_2.vhd
./src/sp37/sp37_ep/sp37_ep_rc_reorder.vhd
./src/sp37/sp37_ep/sp37_ep_rc_reorder_buffer.vhd
./src/sp37/sp37_ep/sp37_ep_requester_4.vhd
./src/sp37/sp37_ep/sp37_ep_rq_buf_combine.vhd
./src/sys/clk_gen.v
./src/sys/sys_define_package.vhd
./src/utils/axis2fifo.vhd
./src/utils/axis2fifo_notready.vhd
./src/utils/axis2fifo_notuser.vhd
./src/utils/axis_combine.vhd
./src/utils/axis_data_width_converter.vhd
./src/utils/axis_data_width_converter_c.vhd
./src/utils/axis_data_width_converter_s.vhd
./src/utils/fifo2axis.vhd
./src/utils/fifo2axis_notuser.vhd
./src/utils/fifo2axis_ready_first.vhd
./src/utils/fifo2axis_tlast.vhd
./src/utils/mig7_ddr3_access.vhd
./src/utils/mig7_ddr3_access_mux2.vhd
./src/wng4/wng4.vhd
./src/wng4/wng4_top.vhd

```



#### vivado里搜索时钟Net

```
show_objects -name find_20 [get_nets -hierarchical -regexp -nocase -top_net_of_hierarchical_group -filter { NAME =~  ".*axis_clk.*" || NAME =~  ".*c_c_pcie_axi_clk.*" || NAME =~  ".*F_c_pcie_clk_n_i.*" || NAME =~  ".*F_c_pcie_clk_p_i.*" || NAME =~  ".*F_s_pcie_clk_p_i.*" || NAME =~  ".*F_s_pcie_clk_n_i.*" || NAME =~  ".*ddr3_clk_n_i.*" || NAME =~  ".*ddr3_clk_p_i.*" || NAME =~  ".*clk_out1.*" || NAME =~  ".*clk_out2.*" || NAME =~  ".*ddr3_clk_sys_in.*"|| NAME =~  ".*clk_in1_ddr3_clk_pll.*"|| NAME =~  ".*ddr3_pll_clk125m.*"|| NAME =~  ".*ddr3_pll_clk100m.*"|| NAME =~  ".*ddr3_pll_clk50m.*"|| NAME =~  ".*ddr3_pll_clk10m.*"} ]
```







#### 一些工作的原则📢



- 每个板子都应该打上标签

- 烧写的时候应该记住板子的序号是哪个，记录





#### Vscode格式脚本是用==shift+alt+F==来运行的









####  特殊函数记录



###### INTEGER_WIDTH

```
 spu_int_fifo_rdata_o     : out std_logic_vector(INTEGER_WIDTH(SPU_NTB_MAX_PORT * SPU_NTB_INT_MAX_PER_PORT - 1) - 1 downto 0);
 比如这个信号的声明，这个信号是用来放类似序号的东西
 然后我知道这个序号需要能数到64，
 但是我不可能设置64位宽对吧，那肯定是64这个数对应最少多少位宽，就用多少位宽
 这里就刚好是6bit，也就是2的六次方刚好把64所有数字表达完成
 这个函数就是为了方便这个计算的
```













# --------------------🧡处理空间1🧡-------------------











## ❓疑惑的问题

####  📍Spreadsheet

#### 📍元指令（pragma）

元指令（pragma）是一种在源代码中给编译器提供指令的方式，用来影响编译器的行为但不改变实际的程序逻辑。它们通常用于控制编译器的特定行为，如优化选项、代码布局、警告处理以及其他与编译过程相关的特性。

元指令不是编程语言的一部分，而是作为编译器特定的指示存在，它们的目的是提供给编译器额外的信息，从而可以对代码生成或处理过程进行细粒度控制。使用元指令时，你可以告诉编译器执行某些任务，或者在处理特定代码段时采取特定的策略，例如：

- **优化**：指示编译器对某一段代码进行优化，或者禁用某些自动优化。
- **代码布局**：控制函数或变量的具体放置在内存中的位置。
- **警告控制**：开启或关闭编译过程中的特定警告。
- **多线程**：为并行编程提供线程安全的指示。
- **内存访问**：优化特定的内存访问模式，如预取指令。

在不同的编程语言和编译器中，支持的元指令可能会有所不同。在C和C++中，`#pragma` 是常见的元指令语法，而在其他语言中，如Java或Python，可能没有内建的元指令支持或采用不同的方式来实现类似功能。

例如，在硬件描述语言（HDL）和FPGA/ASIC设计的上下文中，如Verilog或VHDL，元指令可以用来影响硬件合成工具的行为，指示如何处理特定的代码段，从而优化生成的硬件结构或调整其性能和资源占用。











## PCIE的知识



FPGA里面的PCIE  link up肯定是能起来的

init初始化完成这个是要软件来初始化的，软件初始化完成就完成了





























## 💡自己的一些想法思路



#### 文本的check

做名字的检查，本质上还是在用正则表达式

对于他们做ic的，可以轻松用文本处理，找到每个模块的端口信号，例化名字什么什么的

然后再用这些正则表达式应用在对应的文本上去匹配



他们有一个思路可以的，就是比如信号名字里有reset的，就算作复位信号的检查

包含en的，就算作使能信号的检查





#### 人脑处理速度

人脑的处理速度其实不快

基本都是一些肌肉记忆，跟生存相关的东西会比较快，比如处理图像，视觉听觉等等



但是对于处理一些信息的效率，远远没有电脑快，没有chatgpt快

几千字的东西给chatgpt一下就处理完了，

人还在用大脑金字塔的塔尖那么点区域（毕竟需要很多基础逻辑一步步搭建到最上面的语言处理）来处理文本，一秒钟十个字算不错了



所以不要被什么人脑功耗很低忽悠，只是部分的而已







#### python脚本的领悟

    #这里就涉及到一个认知了，这些文本其实就是一长串的字符罢了，什么换行也是\n连着的
    #所以直接匹配 port  \(   中间这里放个(.*?)捕获就行了    \)
    port_pattern = r'port\s*\((.*?)\);'



```
如果函数 `check_port_names` 返回 `None`，则 `errors = check_port_names(content)` 语句中的 `errors` 变量将被赋值为 `None`，而不是字符串 `"None"`。
```



            #用分割的方式分割后，取第一个元素，就是前面的文本
            #然后再来个剔除空白
            #这个python脚本最大的特点就是功能加功能，直接在后面加
            port_name = line.split(':')[0].strip()



#### 瞎想

写字楼

比如偏远地区人力做一些脚本能做到的事情，但因为成本选择人力的事情

这些价值最终的走向是什么？从偏远地区的电脑，到大城市的写字楼，再到哪？





忽然想到姜文说的，不想总是做导演，总是做就成傻逼儿了，啥也不会

忽然觉得这其实才是最难的，也最重要的

在一个岗位学完就跑，再继续坐就是纯体力活而已







## 📥每天在群聊里面学习



#### 相位噪声分析仪

本质上是fpga处理4路高速adc



#### 芯片测试

芯片不用焊接就可以通过压力压住的那个 socket

**==治具==**

做外回环，有些做内回环

进口厂家最好的是Winway

国内第一梯队精工和儒众



#### 工作薪酬

上市后就躺平的例子几乎是覆盖所有上市公司

华为给的就很多，真能干满8年12年退休也满足了

你只要买满额度，每年的绩效不差，10来年退休后，每年拿的股息差不多都能有个三十来万

要满足退休条件

就是业绩得够好

电力虽然绝对薪水还是低不少，但按照时薪算，可能比通信好不少

而且没有年龄的焦虑

电力系统只有应届生容易进

做嵌入式的相比那些纯软的还是要稳定一点

纯软的那真的是牛马

纯软的都是互联网大厂，钱很多，网上地位高

现在做硬件啦，软件都是牛马，

赚的不多，但能五点下班 双休

ic这几年裁员也严重

IC是因为资本退潮了

之前有多疯狂，现在就有多惨烈

现在老外那边ai火，整个老外的半导体行业还不错





#### 技术竞争

windows不更新也没事

chromebook

AMD不声不响的吃掉了很多intel的市场

IDC 因特尔好像也被EPYC吊打了（ 好像没听说有什么旗舰的新的数据中心处理器了（）
就像当年刚刚开始搞双核一样
跑分很牛逼，实操很糟心
大部分软件，包括操作系统都没有准备好大小核的优化

鬼知道intel在干嘛

台式机u给你干到300w功耗

还是大小核架构

大小核架构本身没毛病

台式机请给我全大核

chiplet技能树对intel锁死了是吗

intel什么时候给志强上大小核架构

工科买新的AppleSillicon就好玩了（）arm简单指令集跑复杂运算效率非常离谱，

属于是之前看M1跑分吊打9900但是matlab跑不过8350u/6700k这一档
AMD的平台不知道对嵌入式开发兼容性如何
尤其是linux下
挺好的，没有那么不堪

我手头还是清一色的intel

但没有大小核的

还是老的用着顺畅

工业软件很少对AMD做优化

amd 在服务器市场比intel猛太多了

说句难听的 和gpu一样 谁关心臭打游戏的





#### FPGA资源

我说，你们有啥应用能把15EG的资源耗尽？

图像编码压缩

h264塞多几个就炸了

帧间压缩都耗费挺多的

图像处理会用到大量的卷积

色块压缩

最简单就是舍去高频了jpeg

通信编解码和图像编解码在某种程度上讲是互通的

就是通信架构的压缩模块呀

通信原理也有哈夫曼不是



#### 厂家

我是跟着厂家的FAE混
verilog的基本语法是lattice的FAE
各种通信算法是xilinx的FAE

硬件的设计是跟着TI的FAE

不仅业务要牛，还得起量，不然fae根本不搭理你

起量直接驻场，FAE当场给你写代码
去年华大就在公牛待了一个多月





#### SFP光纤

像sfp这种，跑个ibert，aurora就不用写了。
整个jesd204b fmc子卡，可以写写
sfp跑个iio这样写才有意义



#### 芯片价格

si5338
翻新的10多20
全新的也就四五十



#### ic设计

专门调整了**==工艺库==**的？ 外国的模拟芯片经常这么干，一个ADC，照着版图一比一还原，同样制程，性能就是要差很多。

去咸鱼喊人教软件的安装

看看这个是什么网站：https://community.broadcom.com/search?s=PXE-E53%3A%20No%20boot%20filename%20received&cs=null&l=1&expanded-categories=undefined



#### 电路板PCB设计

HDI（High-Density Interconnect，中文译为高密度互连）是指一种先进的印刷电路板（PCB）技术，用于制作具有更高密度、更小尺寸和更高性能的电路板。HDI技术通过使用更细的线宽、更小的过孔和更薄的层压材料，使得更多的电路能够在更小的空间内进行连接，从而实现更高的集成度和更好的电气性能。HDI板通常用于高端电子产品，如智能手机、平板电脑、高清显示器和高性能计算设备等。

HDI电路板的主要特点包括：

1. **更高的电路密度**：由于使用了更小的过孔和更细的线路，HDI电路板能够在较小的面积上实现更多的电路连接。
2. **更高的信号传输速度**：HDI电路板的设计能够减少信号传输的延迟和干扰，提高信号的完整性。
3. **更小的体积和重量**：HDI电路板的高密度设计使得电子产品能够更加轻薄，满足便携式设备的需求。
4. **多层结构**：HDI电路板通常采用多层设计，能够实现复杂的电路互连和更高的功能集成。

HDI技术的发展推动了电子产品的小型化、高性能化和高可靠性化，是现代电子产品制造中的关键技术之一。



PCBA测试治具
1.ICT测试治具:电路通断 电压和电流数值及波动曲线 振幅 噪音等
2.FCT测试治具:功能模拟测试
3.疲劳测试治具:功能高频 长时间测试（物理性能）
4.环境测试治具:极限值温度 湿度 跌落 振动 溅水，推断可靠性
5.老化测试治具:长时间通电看是否有失效故障（环境影响）



PCIE5.0 允许的全链路损耗为36DB 去掉 两段 封装 连接器 的值 剩下的就可以是PCB 了
fr4也可以，其实
你看Intel PCIe5.0的主板，也是fr4

优化下 过孔阻抗
换m6 带来4～5db提升

不然过孔那里阻抗会骤降



小心封装画反了



x86比rfsoc简单多了





#### xilinx芯片测试


虽然我没办法扫码，但可以一个一个固件来试，也能测出速度等级
我觉得量**==电源阻抗==**那招是管用的，阻抗越大，速度等级越低

我量的GT电源，-3十几 -2二十几 -1五十几



不同速度等级的程序能混用么？
那倒不会，大多是性能差距
除非是DDR的性能有差距
那样系统直接启动不起来，或者崩溃







#### 国内技术发展

国微的我们也在开发，ZU48DR
有很多限制









#### 通信

搞信号处理很多需要外部同步时钟输入的情况









#### HDMI设计



hdmi干涉了

而且还会倒灌进来

到时候加个AC耦合，但这样只能输出使用了

那样不能加AC电容，HDMI会倒灌进来





#### 军工企业



军工的，累死个人

就是叫你写文档

后期没啥技术

说是嵌入式结果是招进去画板子写文档
我师兄在航天八院也砍了
他说最多的降了30%
快不过万了



#### 考研or工作

现在出去干三年，收入比考一个同类型的硕士应届高

除非你考到985好一点的硕士

今年华为上海很多也才25k

但是你干三年跳槽，应该不止这个数了

华为研发岗本科得多牛逼才能投进去啊

985能进

不过本科进华为年薪给的不多

认识一个清本的朋友，本科毕业华为给14级；硕士去了北邮，今年毕业了还是14级，xs



国内还能在学校学到实际？

学不了一点

要么很深的理论课，要么很过时的工程学

别自己瞎搞，跟着老师和学长干





#### ADC芯片



AD9528便宜的很

14路单端或差分LVDS

9524 9528都还好，就是像这种26M 27M的分不出来





#### 15EG开发板子



几点经验共享：

1 对于linux高手来说，使用peta linux就如吞苍蝇一样难受，废弃它是自然的。

2 使用bitrfs文件系统比ext4文件系统要强许多，为了系统稳定性我们应该使用bitrfs。

3 debian 系统天生支持arm,mips,powerpc,riscv,龙芯loongarch等多种cpu架构，具有5万个以上的经过长期验证和百万人使用过的库和应用包可直接安装使用，无需移植。能节省40%-70%的后期开发工作量及时间。何乐而不为。

4 软件开发平台的主要工作就是根据原理图生成ps ip的配置文件(.tcl)和linux的设备树(.dts)文件。

5 最后在根文件系统中安装需要的驱动程序，库程序及应用程序就完成了一个优秀的软件开发平台的构建。

6 项目开发过程中使用tftp和nfs等网络手段而不是读写tf卡，会带来意想不到的便利和速度。







直接在qspi启动Uboot，在uboot通过nfs写入emmc

我最开始用DD命令刻录的时候发现启动脚本不会运行，没找到原因，就用IMAGEUSB刻录了







去jlc偷个封装就得了



官网的网络安装器不香吗 为什么要花几百GB下载完整包

我草 这是广泛存在的事吗 我从没专门挂过梯子，amd官网不随便上嘛

AMD的网络速度不错，我在美国和香港各有一个服务器，下载到服务器个把小时就可以了，可是从服务器刭我家要几天。远不如AMD服务器直接下快。
只是国内的干线看时间，1点到7点快，其余时间就快不了。



vivado2024.1 链接：https://pan.baidu.com/s/1HNUaSq0vWrKldTXrMw42uw 
提取码：bhdq



A核玩linux和R5玩mcu，还有海量fpga





3325T比7020好用不是一点点，是我这里新产品的主力。
7020的ps是鸡肋，用之不行，弃之可惜。





大概就是pcie5.0的耦合电容

这种逼玩意我补了几百个

能补

正经人谁玩3.0这种垃圾





有手册也画不了

阴间封装

手册上的数据不足以还原

它阴间到什么地步呢

ball错开就算了吧

准确说是有两个ball

间距和别的还不一样

<img src="C:\Users\Administrator\AppData\Local\Packages\45479liulios.17062D84F7C46_p7pnf6hceqser\LocalState\history\temp\Snipaste_2024-06-17_09-13-02.png" alt="Snipaste_2024-06-17_09-13-02" style="zoom:50%;" />



Xilinx是pinout阴间

这玩意是物理形状阴间

没法画

intel给你咋样你就咋样用

这么看，intel这个没啥可玩性啊

收发器快



我15eg拉完工程文件200G

你就知道我有多喜欢ctrls了











我现在是

内存做个虚拟盘

每次关机回写一个iso

或者四小时自动写一个

增量更新就避免了它一直往ssd写垃圾

相比之下cadence只能说是毫无版本管理

cadence准确意义上来说就是个tmd平面绘图软件









兼容xilinx的BSP包有好处吗？做自己的BSP包不是更好吗？

还真在闲鱼买到了有效期2999年的全套许可证，69元也沒还价的意义。
谢谢信息提供者！

你应该有做一个BSP的义务，这也会增加你板子的销量。一人烦，百人简的好事啊！





越新BUG越多，有时候问题解决不了，我就去吧19或18的内核驱动复制过来就解决了







改动太大，再说黑金最近公开的文档都是基于23.1的





我现在台式机和笔记本基本都不用，用小主机组群，性能逆天，体积小，耗电少。平时一台小主机就夠了，做AI时最多8台组群。





诺基亚的那个基站就是这配置，一带四

15eg跑jesd204和信号处理

19eg当dpu

四路100g光口出

也可能是40g

计算为啥不搞几张英伟达显卡

搞fpga这种费力不讨好

他不说是要204B采集数据吗







搞fpga这种费力不讨好

雷达信号处理板不会没事扔一堆不要的接口。

然后soc只要一片就行了。

用作bmc，其余几片大概率会选ku060 vu9p这种FPGA

所以说这个板子看起来很怪









人家是多产品线

他是真离谱

我自己的15eg都做出来了，他的还没发货

他接定制来的

他就是纯钓着

反正就是拖
一叶之秋现在做大做强了吧
感觉他在接一些企业的定制
然后自己也雇了人干活
之前买的他的15eg半年没发货被我退了
一叶知秋
一言难尽
我见一次黑一次，因为我真的被他拖了半年多
真的抽象，问他进度他要么玩消失，要么打岔或者已读不回，还时常王者在线

笑死我

集资玩金融去了（

他在b站一直更新他接的私活

而且问fmc速率也不回

不如群主靠谱

原来大家都被一叶骗了，都快一年了，一叶把大家的钱都干嘛了也不清楚/敲敲

一叶很强的

只能纯纯看个视频

他应该干了也有二十多年了吧

他最早没用咸鱼，直接支付宝收款码的

你可以试着付一下款先他给你发不发，发了核心板，发不发底板，你问他核心板做没做等长，八成他不会理你的

至于他王者荣耀为什么总是在线
他自己说是因为出差，然后发一个狗头
我觉得我攻击性很一般吧，我的目的不是诋毁他，是让大家别上当，至少我当时有被骗的感觉

一年不发货，也不返利息，真想玩zynq，r佬估计都发货了吧

我有个朋友买了他的19eg拿到货了啊

那行是不是更恶劣了

他15eg初版比19eg要早大半年呢

利润小的，诈骗就诈骗了，只做利润大的

早就是了，如果一叶说话算数，或者别中秋拖国庆，国庆拖元旦，元旦拖过年，我肯定吹爆他，就像我现在，言必称奇哥牛逼

是呀 那他仅19eg底板搭载的qsfp都多人表示他的朋友收到货了，那没有qsfp的15eg，拖那么久，并且不回消息，就显得人品不行，而不是技不如人了

卖板子给群友不如接定制赚钱

一边玩去





x86有啥好画的

还是fpga有挑战性

x86硬件那叫一个有手就行





还有，有什么学习hpc的资料吗

还有，有什么学习hpc的资料吗









链接：https://pan.baidu.com/s/1KRKo2HnG84MCA4Og4Qe3dg?pwd=xixi 
提取码：xixi 
--来自百度网盘超级会员V3的分享











#### 镜像



imageUSB

15eg 启动

我一共3块15eg的扳子，看来这块板子设计最合理。

我出厂启动盘测试了一下，启动正常，启动后检查各方面也未发现异常。

下一步就是要做一个带UI的debian系统启动盘，再后就可以正常进入项目开发工作了。











#### 接口

MIPI

就是摄像头模块排线这种东西





#### PCIE相关

本来pcie就在gth上 gty跑四个qscp28

fmc一般25g差不多了



#### 商业

###### 开发板赚不了钱，解决方案才行

黑金已经改变了

现在的黑金不是做开发板的了

@lzg 做解决方案是吧

开发板赚不到钱的



#### 买芯片

海风 2024/6/19 14:44:26
自己有实际项目，有公司的话，直接找代理商会更好

海风 2024/6/19 14:44:38
可以在xilinx原厂注册

海风 2024/6/19 14:44:59
后续下单都能累计自己的积分

海风 2024/6/19 14:45:04
获得更好的价格

海风 2024/6/19 14:45:38
从贸易商获取，价格基本就那样了，也就是方便点





## 📺每天看视频收集想法





#### 制程

国产先进制程、先进光刻机，目前都没有公开信息可以分析。只能等官方公布

华为有两台1980i，这个光刻机的极限是能造7nm, 缺点是用这光刻机造，良率很低。一台1980i一天能产一百多万28nm的芯片，经过多重曝光达到7nm，则只一天只有30万，算上良率，一天估计有10万颗左右

能做到哦，比如AMD的80%的封装都是大陆的通富微电供应的，这些3D封装、chiplet技术都是掌握的

长电，通富，华天





#### 计算机图形学

如果你能在不使用任何第三方库的情况下，完全从底层实现一个简易3D渲染器（即使是命令行版本的），这将显示出你极高的编程能力和深入的计算机图形学理解。这意味着你需要手动处理包括但不限于以下任务：

​	1.	设计并实现自己的数据结构来表示和操作**==三维几何模型==**、**==颜色==**、**==纹理坐标==**等。

​	2.	编写代码**==模拟图形管线==**中的各个阶段，如**==顶点变换==**、==**投影变换**==、**==裁剪==**、**==光栅化==**等。

​	3.	使用纯文本方式在命令行界面下呈现3D效果，这可能涉及到创新的可视化方法。

​	4.	如果要在CMD中输出真正的图像信息，则需要研究如何直接操作显卡或者操作系统提供的低级图形接口。


总的来说，这样的能力在开发者中是非常罕见且令人钦佩的，它要求开发者对计算机系统有深刻的理解，并具备强大的问题解决和抽象思维能力。然而，实际上，由于现代图形API已经高度成熟和完善，大多数3D渲染器开发都会基于OpenGL、DirectX、Vulkan等现成的图形库进行，以提高开发效率并利用硬件加速功能。

```
https://www.youtube.com/watch?v=ih20l3pJoeU&ab_channel=javidx9
```



从理论上来说，cmd可以输出彩色字符，Python里建3D数据，再转成2维映射到数组上，完全可行。就是纯代码实现而不用第三方库就很牛逼了。







#### can

CAN也是异步串行通信吧

RIGUKE 2024/6/19 17:07:04
嗯嗯，和485类似

RIGUKE 2024/6/19 17:07:24
艾默生的电源很多都用的

海风 2024/6/19 17:07:26
那底层逻辑和UART就类似了，只不过协议不同，物理特性一样

再用电平转换芯片做电气链接





#### 汽车摄像头

12G sdi

摄像头为什么不用HDMI,DP这些接口呢？

汽车用

就一根同轴线

而且能传很远

光纤要单独供电

这个就一根同轴线

搞定供电和数据

是这个更合适汽车上的应用


FPGA的serdes io驱动不了多长的线缆吧



要串行器和解串器



你车里内置的摄像头85%都是gmsl







sata和mipi口旧瓶装新酒的原因是芯片级通讯协议不适合这种大尺寸的开发板，xilinx的vivado对SATA及MIPI这二种协议支持不理想。





群主的板子做了一个全设备的bit文件，其中SATA囗改走tcp/ip协议，MIPI口改走epon协议。真正做到了几十米到几千公里的应用。
使用二台小主机组群开发，全部综合时间为1小时左右。



#### 光纤

请教下，这种100g 分成4个25g的线缆能向下兼容40g转4个10g吗？

应该是可以的，QSFP28向下兼容QSFP+，同样SFP28和SFP+

我一个单模40G 20公里光模块400多

没有QSFP是一大遗憾

用这种方式不知道能不能将4个SFP合并成一个QSFP来用







使用频域滤波是唯一的好办法。

室验室一般是软件时序问题，工业现场是正常现象（80%以上）。除频域滤波基本无法彻底解决。



Idelay可以尝试下

这个速率得上LVDS，LVCMOS已经顶不住了





让编译器知道你输入的是信号特点

干扰一般都是不规律的

能和信号本身同步的周期性干扰几乎没有可

IO模块都可以设置Delay，具体看器件，网上搜一下很多





谢谢你们，控制时序后问题解决了













黑金真能搞啊，500MA的功率开关给到四个USB2.0

这是USB2.0的标准啊

几个USB口共享0.5A的供电

功率稍微大点，USB就不识别了







但正点的直连觉得有点危险





现在中高端电脑主板的USB，虽然没有奢侈到独立的供电，但已经有独立的保险丝







Anygo 2024/6/20 19:14:06
AMD工作强度没那么高吧

天生邪恶的宇智波小鬼 2024/6/20 19:14:12
看部门

天生邪恶的宇智波小鬼 2024/6/20 19:14:30
有的部门996有的部门放羊

天生邪恶的宇智波小鬼 2024/6/20 19:14:37
中国人

天生邪恶的宇智波小鬼 2024/6/20 19:16:10
美其名曰我工作十年了都没用过那玩意

天生邪恶的宇智波小鬼 2024/6/20 19:16:13
真傻逼

天生邪恶的宇智波小鬼 2024/6/20 19:16:23
工作十年了verdi原理图都没用过

Anygo 2024/6/20 19:17:16
中间有俩月申请远程，工资照拿，活儿不用干

天生邪恶的宇智波小鬼 2024/6/20 19:18:08
大公司很多这样的

天生邪恶的宇智波小鬼 2024/6/20 19:18:23
![img](file:///)放羊摸鱼 工资照拿



amd真的教会了我很多。刚来amd还是一个愣头青如今也算是脱离了新手村
1.搞技术不如搞好和领导的关系
2.不要透露出自己的家境，家境差老板可以肆无忌惮地压榨你，家境好老板可能会嫉妒你
3.立场比是非重要，起码职场是这样的
4.功劳是汇报出来的，不是干出来的
5.缺点是千万不能承认的。自己承认了缺点，老板不会觉得你谦虚，只会拿这个当靶子一次又一次地PUA你
6.永远不要对同事倾囊相授，即使同事技术依然不如你，但有可能已经够用了。之后就方便领导卸磨杀驴
7.最好不要太快地把工作做完，不然下一次老板定ddl就按这次定
8.善战者无赫赫之功。直接把难题处理了，老板就看不出这是难题。必要时可以假装失败，然后一步步“改进”
9.领导永远是对的。即使有时候提出离谱的要求，也千万不能“忤逆”





Anygo 2024/6/20 20:14:28
不考虑开发难度的话，感觉ZYNQ可以覆盖性能所及的所有芯片的用途了

Plum Forgot 2024/6/20 20:21:48
差不多

Plum Forgot 2024/6/20 20:22:18
但是zynq应该算最难开发的芯片之一了





Harry 2024/6/20 20:30:29
altera主要是玩的人少

Overstay. 2024/6/20 20:30:48
对没资料

泰勒展不开🅥. 2024/6/20 20:32:17
玩儿的人越多，就玩儿的人越多

Veryxs 2024/6/20 20:33:58
玩的人越少，就玩的人越少







海风 2024/6/20 21:11:41
确实，altera同等级的器件会更贵

海风 2024/6/20 21:13:01
而且被intel买下后，altera的发展重点也开始向数据中心转移

海风 2024/6/20 21:13:28
对于原先FPGA的传统市场就开始减少了资源投入

海风 2024/6/20 21:13:46
销售策略也变的非常死板

海风 2024/6/20 21:14:07
几乎把中低端市场拱手送了出去







海风 2024/6/20 21:18:05
国内能好好活下去的估计就紫光，安路，复旦微

沐阳 2024/6/20 21:18:09
感觉现在国产fpga活过来了，以前被压的半死不活

海风 2024/6/20 21:18:16
其它都悬

电子新手菜![img](我的小本本.assets/%WLIU6QE1T[XIUH%{TW%%7.png) 2024/6/20 21:18:25
国产化都在要求，公司





海风 2024/6/20 21:22:02
芯片就是高投入高毛利螺旋上升的行业

海风 2024/6/20 21:22:12
一旦这个循环被打破，衰败也是很快的

海风 2024/6/20 21:22:29
lattice被国产压的喘不过气来







海风 2024/6/20 21:22:50
因为lattice很早就退出了高端FPGA迭代升级

海风 2024/6/20 21:23:04
一个ECP3用了这么多年，还在卖

海风 2024/6/20 21:23:24
同时期的V4已经被扫进历史垃圾堆

海风 2024/6/20 21:23:41
ECP5的规格相对ECP3升级有限

海风 2024/6/20 21:23:53
ECP5往上长期空缺

海风 2024/6/20 21:24:24
在国产器件面前被压制的很厉害











海风 2024/6/20 21:26:24
好啥的，国内的51都是兼容芯片，ATMEL原厂51还有多少市场？

海风 2024/6/20 21:27:11
原来lattice在显示器驱动里用的非常多，现在大量被国产FPGA代替





海风 2024/6/20 21:27:25
驱动这块可没人要求国产化

海风 2024/6/20 21:27:43
这块可是lattice最大的蛋糕

海风 2024/6/20 21:28:36
还有路由器这类产品内部做IO扩展，接口转换的应用，也大量被国产代替











海风 2024/6/20 21:50:45
然后中低端不再发展

海风 2024/6/20 21:50:58
C10系列和A10竟然是同样的东西

海风 2024/6/20 21:51:01
阉割的

海风 2024/6/20 21:51:25
然后为了细分市场

海风 2024/6/20 21:51:31
强行将C10软件阉割



海风 2024/6/20 21:52:02
C10的serdes是支持10G的，但部分IP，甚至IP里面的一些模式，死活就给你限定在6.6G以下



海风 2024/6/20 21:52:25
而且没有破解补丁

海风 2024/6/20 21:52:41
骏龙搞破解的那位大神说了，他能破，但不敢破

海风 2024/6/20 21:53:53
然后我找原厂申请解开限制，起码解开CPRI应用的限制，来来回回折腾了小半年，我项目都黄了

海风 2024/6/20 21:54:45
还好碰到移动领导换届，送检时间往后挪了几个月

海风 2024/6/20 21:55:45
赶紧切回xilinx

海风 2024/6/20 21:55:56
才从这个大坑爬出来

海风 2024/6/20 21:56:52
我反正不想再碰altera的东西了

海风 2024/6/20 21:57:04
宁可搞国产，也不碰









zql2 2024/6/21 13:17:36
鬼屋买家

zql2 2024/6/21 13:17:42
直接拉黑就行

胍 2024/6/21 13:18:49
是zql大佬！awsl！











他主要是怕和MPSOC不兼容，毕竟西数的用不起来

天生邪恶的宇智波小鬼 2024/6/21 21:03:56
p44pro







RIGUKE 2024/6/21 21:01:30
looooo   群主的镜像直接sd启动可以不
@looooo 可以也只能

RIGUKE 2024/6/21 21:01:44
QSPI+EMMC的还没搞







胍   或者像某点原子这样，串个缓冲器
@胍 缓冲区该烧一样烧

电平转换都防不住烧io吗

不行

那种浮地的

那个只是缓冲器，不带电平转换

一样的

不共地只能隔离
物理隔离开才行









时间的朋友 2024/6/22 13:42:35
15eg可以跑yolo吗

白洛 2024/6/22 13:44:23
v3可以





工作是做不完的











海风   扯皮的时候可以甩对方脸上 
@海风 这倒是真的，I2C接错引脚的时候还可以让软件自己去写模拟的

海风 2024/6/24 10:56:44
RIGUKE   但当你展现出你会的时候，就有工作招上来了
@RIGUKE 这句话确实不错

海风 2024/6/24 10:57:05
所以展现能力的时候要有所保留

























# --------------------🖤处理空间2🖤-------------------









## 暂存库











#### vivado的编译时间





如何单独对一个模块进行OOC综合？



搜索phase的同时，不包含checksum



搜索command标志

```
^(?!.*(?:checksum|INFO|Running|remove|name)).*phase.*
```







搜索完成标志

```
^(?!.*(?:WARNING|INFO|Running|remove|name)).*complete.*
```



搜索所有时间流逝标志

```
elapsed =
```







搜索所有Task

```
Starting
```

![Snipaste_2024-07-03_18-22-55](我的小本本.assets/Snipaste_2024-07-03_18-22-55.png)





搜索所有的时序违例修复情况

```
Timing Summary
```

![Snipaste_2024-07-04_15-03-07](我的小本本.assets/Snipaste_2024-07-04_15-03-07.png)











#### 我自己的编译策略



##### 删掉没用的报告

```
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_opt_report_drc_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_place_report_io_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_place_report_control_sets_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_route_status_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_power_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_methodology_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_drc_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_incremental_reuse_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_bus_skew_0]
set_property IS_ENABLED false [get_report_config -of_object [get_runs impl_2] impl_2_route_report_clock_utilization_0]
set_property report_strategy ultrafast_20240704 [get_runs impl_2]
```









查找所有的fifo_2

```
(?!.*(?:component|--|entity|end|architec|#|U_FIFO_DBG|U_DDR3_REQ_FIFO_2))^.*fifo_2.*
```

```
(?!.*(?:component|--|entity))fifo_2
```









### 每日问题回顾2024.7.8

数据填充方式

初始向量

附加信息

信息认证码

GMAC是什么

GCM的名字是怎么来的？G代表什么，C代表什么，M代表什么

密钥H如何得来？

GCM加密的结构图大概是怎样的，分为几层？

GCM加密后，需要给外界哪几种信息？

SM4加密算法的结构是怎样的？一共分为哪三步？

SM4的密钥扩展算法需要哪些参数？

SM4的密钥扩展算法公式是什么？

其和SM4加密算法的差异是什么？

SM4算法为什么求解的时候只需要逆序轮函数即可？

Ghash的作用是什么？

Ghash如何计算？

有限域GF的多项式乘法有哪三个特点？

使用不可约多项式的原因？

如何判断是否是不可约多项式？









### 看vivado的知识点



#### DFX



DFX设计本质上是FPGA内嵌入了FPGA，也就是说RP可视为一个内嵌的FPGA，

那么这个RP的可用逻辑资源、布线资源和IO也就固定了。正因此，RP的Pblock的大小和形状对设计性能有较大影响，同时，RM的输出/输出端口个数应尽可能少，过多的IO个数大概率会导致布线拥塞。因此，同样的设计，使用DFX和不使用DFX可能会有不同的时序结果。层次化设计在DFX设计中也非常重要，将直接影响合动态区和静态区的分割。





#### Vivado下如何保护自己的源代码

OOC综合





#### 如何快速进行策略扫描？

可以跑多个策略

然后选择比较好的结果，作为下一级的输入





#### Non-Project的工作方式

不用图形化界面，直接用tcl脚本控制





#### 反馈路径的优化



反馈路径是什么？

他的代码表现形式是怎样的

<img src="我的小本本.assets/Snipaste_2024-07-09_09-45-56.png" alt="Snipaste_2024-07-09_09-45-56" style="zoom: 15%;" />





#### 让同一层次的模块在布局时更紧凑一些

<img src="我的小本本.assets/Snipaste_2024-07-09_09-47-29.png" alt="Snipaste_2024-07-09_09-47-29" style="zoom:25%;" />









#### 异步复位同步释放有多个时钟域时如何处理

应该将这些复位信号同步到各自的时钟域先

<img src="我的小本本.assets/Snipaste_2024-07-09_09-49-34.png" alt="Snipaste_2024-07-09_09-49-34" style="zoom:33%;" />





#### FIFO为什么不能正常工作？（可以看看成熟IP核的约束是怎样的）

<img src="我的小本本.assets/Snipaste_2024-07-09_09-51-21.png" alt="Snipaste_2024-07-09_09-51-21" style="zoom:25%;" />





#### 时钟抖动会影响建立时间和保持时间违例吗？

<img src="我的小本本.assets/Snipaste_2024-07-09_09-53-12.png" alt="Snipaste_2024-07-09_09-53-12" style="zoom:25%;" />







#### ==从快时钟域到慢时钟域完成位宽转换，这时，这两个时钟是同步的==











就在这个目录xdma_0_ex.srcs\sim下面搞仿真工程

<img src="我的小本本.assets/Snipaste_2024-07-10_10-59-40.png" alt="Snipaste_2024-07-10_10-59-40" style="zoom: 25%;" />

















### GCM256仿真工程

文件列表

```
.\behav\testbench\gcm\gcm256_2_tb.vhd
.\behav\testbench\gcm\encrypt_key_sim.vhd
..\sources_1\gcm\gcm256\gcm256_ae_2.vhd
..\sources_1\gcm\gcm256\gcm256_ad_2.vhd
..\sources_1\gcm\gcm128\gcm128_block_product_c.vhd
..\sources_1\sm4\sm4_encrypt_top.vhd
..\sources_1\utils\axis_256to2_128.vhd
..\sources_1\utils\axis_fifo.vhd
..\sources_1\basic_component\fifo_2.vhd
..\sources_1\basic_component\fifo_ctrl_2.vhd
..\sources_1\basic_component\fifo_data_block.vhd
..\sources_1\basic_component\ram_reg_2.vhd
..\sources_1\utils\fifo2axis_tdata.vhd
..\sources_1\utils\axis_256to128.vhd
..\sources_1\gcm\gcm128\gcm128_ae.vhd
..\sources_1\gcm\gcm128\gcm128_ae_flow_ctrl.vhd
..\sources_1\utils\fifo2axis_tlast.vhd
..\sources_1\gcm\gcm128\gcm128_ghash.vhd
..\sources_1\utils\axis_2_128to256.vhd
..\sources_1\utils\axis_128to256.vhd
..\sources_1\sm4\sm4_key_expansion.vhd
..\sources_1\sm4\sm4_ck_get.vhd
..\sources_1\sm4\sm4_round.vhd
..\sources_1\sm4\sm4_t_transform.vhd
..\sources_1\sm4\sm4_sbox.vhd
..\sources_1\gcm\gcm128\gcm128_ad.vhd
..\sources_1\gcm\gcm128\gcm128_ad_flow_ctrl.vhd

```

















/gcm256_2_tb/U_GCM256_AE_2



/gcm512_tb/U_GCM512_AE











2024.7.19【防拆代码走查】会议记录

1.需要使用板载晶振提供的时钟源。具体做法为使用PLL输出的100Mhz时钟。

2.防拆逻辑复位需要使用PLL输出的Lock信号。

3.防拆的两个基本需求：<传递CPU的防拆启动标志给MCU>和<根据MCU给的防拆标志判断是否进入防拆逻辑>需要解耦，需要各自单独运行。

4.对MCU输入的防拆信号，需要经过sig_filter模块进行同步和滤波处理。（对于外部管脚信号、异步信号需要同步后才能使用）

5.进入防拆状态后，需要持续复位CPU。具体做法为持续复位CPU上电模块（CPU上电模块需要500ms才能进入上电程序，能确保在上电前进入防拆程序逻辑）











2024.7.23【防拆代码走查】会议记录

1.上次会议的五个需求已修改。

2.目前代码在触发防拆后，整个FPGA除了PCIE核，其他逻辑都会被复位。

3.已将最新程序交给陈俊测试，等待测试结果。









## HDMI标准

主要取决于信源端和显示端**两块HDMI控制芯片**的协商，这个协商过程是通过EDID来进行的。

HDMI 线材没有2.0和2.1之分，官方只定义了高速线和超高速线。HDMI 线只是物理传输通道，没有芯片也没有协议。短距离使用（1.5米内），你甚至可以用以前的2.0线跑满48Gb带宽；





### HDMI 2.1

- 发布年份：2017
- 数据传输率：**==48 Gbps==**
- 支持4K @ 120 Hz和8K @ 60 Hz



**==光纤HDMI连接线材，==**可以传输很远的距离











## DP标准



### DisplayPort 2.0

- **发布年份**：2019
- **数据传输率**：**==80 Gbps==**
- 最大分辨率
  - 单显示器：10K（10240x4320）@ 60 Hz，带30 bpp（bits per pixel）和HDR
  - 双显示器：8K（7680x4320）@ 120 Hz，或4K（3840x2160）@ 144 Hz







## 内存频率

DDR5-6000 CL30-38-38-38-96-96



















## 256之前的仿真波形

```
onerror {resume}
quietly WaveActivateNextPane {} 0


####################################################🏀🤯这里是GCM256仿真模块的顶层信号🤯🏀####################################################
####################################################🏀🤯这里是GCM256仿真模块的顶层信号🤯🏀####################################################
####################################################🏀🤯这里是GCM256仿真模块的顶层信号🤯🏀####################################################
####################################################🏀🤯这里是GCM256仿真模块的顶层信号🤯🏀####################################################

add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 时钟复位信号 /gcm256_2_tb/PERIOD
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 时钟复位信号 /gcm256_2_tb/s_nrst_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 时钟复位信号 /gcm256_2_tb/s_enable_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 时钟复位信号 -color Yellow -itemcolor Yellow /gcm256_2_tb/s_clk_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 系统参数 -divider -height 21 开始处理明文
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 系统参数 /gcm256_2_tb/s_plain_enable
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 系统参数 /gcm256_2_tb/s_ciph_enable
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 系统参数 /gcm256_2_tb/s_iv_mode
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -color Yellow -itemcolor Yellow /gcm256_2_tb/s_state_ae
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 GCM256模块给出来的Ready信号
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 作用是说现在明文加载完毕了
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -color Cyan /gcm256_2_tb/s_ae_ready_o
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 给到GCM256模块启动加密
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 这个开始信号是顶层自己控制暂停的
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -color Magenta /gcm256_2_tb/s_ae_start_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 记录给GCM256模块发送了几次加密使能吧
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 /gcm256_2_tb/s_ae_cnt
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 给出来的加密参数
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 /gcm256_2_tb/s_ae_ciph_key_index_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 /gcm256_2_tb/s_ae_hash_subkey_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 /gcm256_2_tb/s_ae_iv_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 /gcm256_2_tb/s_ae_iv_mode_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 /gcm256_2_tb/s_ae_aad_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -divider -height 21 完成一次加密的标志
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -color Magenta /gcm256_2_tb/s_ae_plain_tlast_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -color Yellow /gcm256_2_tb/s_ae_plain_tready_o
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 控制GCM加密模块 -color Cyan /gcm256_2_tb/s_ae_plain_tvalid_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 明文仿真相关的逻辑 -divider -height 21 others
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 明文仿真相关的逻辑 -divider -height 21 F0
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 明文仿真相关的逻辑 /gcm256_2_tb/s_state_p
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 明文仿真相关的逻辑 /gcm256_2_tb/s_ae_plain_tvalid_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 明文仿真相关的逻辑 /gcm256_2_tb/s_ae_plain_tdata_i
add wave -noupdate -expand -group gcm256_2_tb顶层信号 -expand -group 明文仿真相关的逻辑 /gcm256_2_tb/s_plain_cnt


####################################################💚🤯这里做的是SM4顶层，主要是协调密钥的拓展，完成密钥拓展后送给加密模块进行加密🤯💚####################################################
####################################################⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️🤯第一个SM4加密模块🤯⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️####################################################
####################################################⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️🤯第一个SM4加密模块🤯⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️⚫️####################################################
####################################################💚🤯这里做的是SM4顶层，主要是协调密钥的拓展，完成密钥拓展后送给加密模块进行加密🤯💚####################################################

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -divider -height 21                  标志当前密钥dpram是否正在读出进行拓展，
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -divider -height 21                  Dpram读出的时候就不要写入了，这个很合理
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tready_o
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tvalid_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tlast_i 
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tdata_i 
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -divider -height 21                  Dpram的写入地址
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  Key总线    -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tuser_i 

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tready_o 
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_i 
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_i  
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tuser_i  
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_i  

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tvalid /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tvalid /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_ff1
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tvalid /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_ff2
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tvalid /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_ff3
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tvalid /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_ff4

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tlast /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tlast /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_ff1
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tlast /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_ff2
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tlast /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_ff3
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tlast /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_ff4

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tdata /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tdata /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_ff1
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tdata /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_ff2
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tdata /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_ff3
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  明文打拍   -group  axis_s_tdata /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_ff4

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  密文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_m_tvalid_o
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  密文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_m_tlast_o 
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 端口总线  -expand -group  密文总线   -color Yellow -itemcolor Yellow      /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_m_tdata_o 


add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram   -divider -height 21 密钥128bit通过8bit输入信号输入，需要16个周期
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入使能   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tvalid_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入使能   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tlast_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入使能   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_valid_cnt
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入使能   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_receive_done
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入使能   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/s_key_buf_wr_valid

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入地址   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tuser_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入地址   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/s_key_buf_wr_addr

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入密钥数据   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tdata_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入密钥数据   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_valid_cnt
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入密钥数据   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tdata_tmp
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入密钥数据   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_receive_tdata
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  写入   -expand -group  写入密钥数据   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/s_key_buf_wr_data

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取使能       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取使能       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_ff1
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取使能       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_edge_r
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取使能       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_start_flag
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取使能       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/key_buf_rd_gen
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取使能       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/s_key_buf_rd_valid

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取地址       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tuser_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取地址       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/s_key_buf_rd_addr

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  读取   -expand -group  读取数据       /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/s_key_buf_rd_data


add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志                                                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tvalid_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志                                                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tlast_i
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志                                                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_valid_cnt
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志                                                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_receive_done
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志                                                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tlast
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志    -divider -height 21                            跟Session有关，告诉其他模块哪些Session的密钥已经准备好了
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 1-密钥dpram  -expand -group  密钥接收完成有效标志    -color Yellow -itemcolor Yellow                /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/key_valids_o




add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输入    -divider -height 21 标志当前密钥dpram是否正在读出进行拓展，
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输入    -divider -height 21 Dpram读出的时候就不要写入了，这个很合理
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输入    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tready
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输入    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tvalid
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输入    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tlast
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输入    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tdata
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输出    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tvalid
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输出    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tlast
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  拓展模块  -expand -group  输出    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tdata


add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  整理CTR密钥                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tvalid
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  整理CTR密钥                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tvalid_ff1
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  整理CTR密钥                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tlast
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  整理CTR密钥  -radix unsigned  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/exp_key_cnt
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  整理CTR密钥                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tdata
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 2-密钥拓展部分  -expand -group  整理CTR密钥                   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/exp_key_array



add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密钥输入   -divider -height 21 看看这里的Busy是什么意思
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密钥输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/exp_key_busy
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密钥输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/sm4_encrypting_busy_o
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密钥输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/exp_key_array        
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密钥输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_exp_tvalid_ff1

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  明文输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tvalid_ff4
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  明文输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tlast_ff4
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  明文输入   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tdata_ff4

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密文输出   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_m_tvalid_o
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密文输出   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_m_tlast_o
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  密文输出   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_m_tdata_o 

add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  准备状态标志   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tvalid
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  准备状态标志   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_key_tready
add wave -noupdate -expand -group SM4_ENCRYPT_TOP_0  -expand -group 3-SM4加密部分   -expand -group  准备状态标志   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/axis_s_tready_o


####################################################💚🤯这里是SM4加密模块的细节🤯💚###################################################
####################################################💚🤯这里是SM4加密模块的细节🤯💚###################################################
####################################################💚🤯这里是SM4加密模块的细节🤯💚###################################################
####################################################💚🤯这里是SM4加密模块的细节🤯💚###################################################

add wave -noupdate -expand -group gcm256_2_tb顶层信号 -group 时钟复位信号 -color Yellow -itemcolor Yellow /gcm256_2_tb/s_clk_i

add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Yellow -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_key_exp_valid_i
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Yellow -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/s_axis_key_exp_valid_ff1
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Yellow -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/s_axis_key_exp_valid_r
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Cyan   -itemcolor Cyan   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/s_axis_s_tready
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Yellow -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_s_tvalid_i
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Yellow -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_s_tlast_i
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 检测边沿输出ready信号  -color Cyan   -itemcolor Cyan   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/s_axis_s_tready

add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 整理密钥数据  -color Cyan   -itemcolor Cyan   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_key_exp_array_i
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 整理密钥数据  -color Cyan   -itemcolor Cyan   /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/exp_key_array


add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 整理明文or密文数据格式  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_s_tdata_i
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 整理明文or密文数据格式  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/data_format


add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group P_DATA    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/data_format
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group P_DATA    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/round_data
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group P_DATA    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/round_data_ff1
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group P_DATA    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/round_do


add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group sm4_round    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/enable_i
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group sm4_round    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/round_data
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group sm4_round    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/exp_key_array
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 开始进行轮函数运算  -expand -group sm4_round    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/round_do

add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 简单处理轮函数输出  -expand -group sm4_round    /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/data_out




add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_valid_dly
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_last_dly
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_data_dly
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线 -color Magenta -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_m_tvalid_o
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线 -color Magenta -itemcolor Yellow /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_m_tlast_o
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/axis_m_tdata_o
add wave -noupdate -expand -group sm4_encrypt_0 -expand -group 最后的输出总线  /gcm256_2_tb/U_SM4_ENCRYPT_TOP_0/SM4_ENCRYPT_INST/s_busy


##########################💚🥏GCM128_AE模块🥏💚##################################
##########################💚🥏GCM128_AE模块🥏💚##################################

##端口信号
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的状态标志/控制 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ready_o
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的状态标志/控制 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_start_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的状态标志/控制 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_done_o 

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的信息 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_key_index_i 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的信息 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_hash_subkey_i    
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的信息 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_iv_i             
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的信息 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_iv_mode_i        
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group GCM加密的信息 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_aad_i
   
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 需要加密的明文数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tready_o
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 需要加密的明文数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tvalid_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 需要加密的明文数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tlast_i 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 需要加密的明文数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tdata_i 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 需要加密的明文数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tkeep_i 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 需要加密的明文数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tuser_i 


add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 给到SM4模块进行加密的数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_enable_o       
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 给到SM4模块进行加密的数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_plain_tready_i 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 给到SM4模块进行加密的数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_plain_tvalid_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 给到SM4模块进行加密的数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_plain_tlast_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 给到SM4模块进行加密的数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_plain_tdata_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 给到SM4模块进行加密的数据 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_key_index_o   
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group SM4模块完成加密的密文 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tvalid_i 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group SM4模块完成加密的密文 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tlast_i  
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group SM4模块完成加密的密文 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tdata_i  

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_h_o                       
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_din_tvalid_o   
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_din_tlast_o    
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_din_tdata_o    
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_dout_tvalid_i  
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_dout_tlast_i   
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group Ghash /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_dout_tdata_i   

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_h_o            
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_din_tvalid_o   
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_din_tlast_o    
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_din_tdata_o    
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_dout_tvalid_i  
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_dout_tlast_i   
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group J0Ghash没有被使用 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/j0_ghash_dout_tdata_i
 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tready_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tvalid_o
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tlast_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tdata_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tkeep_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tuser_o 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 端口信号 -expand -group 完成加密的数据，输出到另一端 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tag_o   



##第一部分代码：Ready接口的，要输出上级模块请求数据的
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_READY -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_state_ready
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_READY -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_plain_tready
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_READY -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tvalid_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_READY -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tlast_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_READY -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ready




##第三部分代码：准备初始向量+存储加密信息
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_state_j0

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 加密信息写入FIFO -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_input_info_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 加密信息写入FIFO -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_aad_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 加密信息写入FIFO -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_hash_subkey_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 加密信息写入FIFO -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_input_info_fifo_wr_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 锁存key的index -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_key_index_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 锁存key的index -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_key_index_r

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 状态向量模式选择 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_iv_mode_i

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  -divider -height 21 应该是计算128bit状态向量的时候需要H参数
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_hash_subkey_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_ghash_h
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  -divider -height 21 状态向量
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_iv_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_ghash_din_tdata
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_ghash_din_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_ghash_din_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 128bit模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_ready

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 96it模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 96it模式  -divider -height 21 不用计算直接就ready了
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_J0 -expand -group 96it模式  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_ready

##第四部分代码：计算计数器块

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 一直使能的
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_enable
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_wr_pause
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 只要写入了明文FIFO，就开始调用计算
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 输出密钥索引
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_key_index_r
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Cyan -itemcolor Cyan -divider -height 21 保存一下状态向量初始状态，后面需要用来计算的
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_r
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_key_index
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 生成明文总线
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 计算REVERSE_BYTE(INC32(s_j0, X"1"))
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tdata
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 计算INC32(s_j0, X"1")
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_inc32
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow -divider -height 21 标记输入明文数据是最后的了
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tlast_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group others状态 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tlast


add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta -divider -height 21 计算REVERSE_BYTE(INC32(s_j0_inc32, X"1"))
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tdata
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta -divider -height 21 计算INC32(s_j0_inc32, X"1")
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_j0_inc32
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_plain_tlast_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"1"状态 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_wr_pause

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"2"状态 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"2"状态 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"2"状态 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 计算REVERSE_BYTE(s_j0_r)
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"2"状态 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 计算CIPH(J0) 
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_GCTR -expand -group X"2"状态 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_plain_tdata




##第五部分代码：根据SM4模块输出的加密结构Ek，对FIFO中的明文进行加密。并在最后存储J0（第一个计数器块）
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 读取明文 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/clk_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 读取明文 -color Yellow -itemcolor Yellow -divider -height 21 SM4模块出来的数据标志
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 读取明文 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tvalid_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 读取明文 -color Yellow -itemcolor Yellow -divider -height 21 最后一个了，不用再读明文
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 读取明文 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_rd_pause
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 读取明文 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_rd

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 暂停标志 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tlast_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 暂停标志 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_rd_pause

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group EK开始输入-0 -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/clk_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group EK开始输入-0 -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tvalid_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group EK开始输入-0 -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tlast_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group EK开始输入-0 -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/cipher_ciph_tdata_i

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-1【读FIFO】 -expand -group 不是最后J0的时候 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tvalid_r1
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-1【读FIFO】 -expand -group 不是最后J0的时候 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tlast_r1
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-1【读FIFO】 -expand -group 不是最后J0的时候 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tdata_r1

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-1【读FIFO】 -expand -group 最后J0的时候 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tvalid_r1
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-1【读FIFO】 -expand -group 最后J0的时候 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tlast_r1
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-1【读FIFO】 -expand -group 最后J0的时候 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tdata_r1

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-不是最后J0的时候 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tvalid_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-不是最后J0的时候 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tlast_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-不是最后J0的时候 -color Yellow -itemcolor Yellow -divider -height 21 颠倒字节-REVERSE_BYTE(s_cipher_ciph_tdata_r1)
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-不是最后J0的时候 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tdata_r2

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tvalid_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow -divider -height 21 密文FIFO写入使能
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow -divider -height 21 明文数据-使用(127-0)计算异或XOR
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_plain_fifo_data
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow -divider -height 21 从SM4过来打拍的数据
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_tdata_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/v_ciph_data
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow -divider -height 21 高于128的不变
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 1-进行密文计算 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-最后J0的时候 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tvalid_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-最后J0的时候 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tlast_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-最后J0的时候 -color Yellow -itemcolor Yellow -divider -height 21 颠倒字节-REVERSE_BYTE(s_cipher_ciph_j0_tdata_r1)
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-最后J0的时候 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tdata_r2

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-保存J0 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_cipher_ciph_j0_tvalid_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-保存J0 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_j0_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group P_CIPH_CAL -expand -group 对EK进行打拍对齐-2【计算】 -expand -group 2-保存J0 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_j0_fifo_wr_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO -expand -group 位宽常量  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO -expand -group 已写入数量  -divider -height 21 根据count来看是否满了
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO -expand -group 已写入数量  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_bp

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO -expand -group 复位  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/enable_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO -expand -group 复位  /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_reset

##第六部分代码：Ghash计算部分+读取第一个计数器块=计算最终的Tag
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-0 -color White -itemcolor White /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/clk_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-0 -color Gray60 -itemcolor Gray60 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-0 -color Gray60 -itemcolor Gray60 /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-1 -color Plum -itemcolor Plum /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_r1
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-1 -color Plum -itemcolor Plum /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data_r1

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-2 -color Green -itemcolor Green /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 1-密文总线打拍 -expand -group 打拍-2 -color Green -itemcolor Green /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data_r2

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color White -itemcolor White /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/clk_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color Orange -itemcolor Orange -divider -height 21 密文写入总线标志
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color Orange -itemcolor Orange /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color Orange -itemcolor Orange -divider -height 21 默认为高，数据包的Last的时候会重新拉高，以便下一个数据包可以读取一次
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color Orange -itemcolor Orange /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_input_info_fifo_rd_enable
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color Yellow -itemcolor Yellow -divider -height 21 单个数据包只会在开始读取一次
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读使能 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_input_info_fifo_rd

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读数据 -color {Cornflower Blue} -itemcolor {Cornflower Blue} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_input_info_valid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 读数据 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_input_info_fifo_rd_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 对齐Ghash输出总线 -color {Cornflower Blue} -itemcolor {Cornflower Blue} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 对齐Ghash输出总线 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_h
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 2-读取信息FIFO中的ADD和H参数 -expand -group 对齐Ghash输出总线 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tdata

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group 根据keep来判断使用多少个32bit数据 -color Green -itemcolor Green /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group 根据keep来判断使用多少个32bit数据 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 组合逻辑对齐_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group 根据keep来判断使用多少个32bit数据 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_data_tkeep

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group 密文长度记录 -color Green -itemcolor Green /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group 密文长度记录 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_data_cnt

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group Ghash总线整理输出 -color Green -itemcolor Green /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group Ghash总线整理输出 -color {Cornflower Blue} -itemcolor {Cornflower Blue} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group Ghash总线整理输出 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_h
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-1-计算所有密文Ghash -expand -group Ghash总线整理输出 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tdata

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group 标志 -color Orange -itemcolor Orange -divider -height 21 总线最高位就是last标志
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group 标志 -color Orange -itemcolor Orange /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_wr_data_r2
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group 标志 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_tag_cal_last

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group Ghash总线整理输出 -color {Cornflower Blue} -itemcolor {Cornflower Blue} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group Ghash总线整理输出 -color {Cornflower Blue} -itemcolor {Cornflower Blue} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group Ghash总线整理输出 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_h
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group Ghash总线整理输出 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tdata
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group Ghash总线整理输出 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 对密文长度进行清零
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 3-2-计算ADD和密文长度Ghash -expand -group Ghash总线整理输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_data_cnt

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group 第一个Ek0的FIFO读取 -expand -group 使能 -color Orange -itemcolor Orange /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group 第一个Ek0的FIFO读取 -expand -group 使能 -color Orange -itemcolor Orange /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ghash_din_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group 第一个Ek0的FIFO读取 -expand -group 使能 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_j0_fifo_rd

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group 第一个Ek0的FIFO读取 -expand -group 读数据 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_j0_fifo_rd_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group 标志 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_dout_tvalid_i

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group Tag结果 -color {Cornflower Blue} -itemcolor {Cornflower Blue} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_done
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group Tag结果 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ghash_dout_tdata_i
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group Tag结果 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_j0_fifo_rd_data
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 6-Tag计算 -expand -group 4-计算Tag -expand -group Tag结果 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_tag

##第六部分代码：将加密完成的密文转换成AXIS总线形式输出
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group Empty信息 -color Yellow -itemcolor Yellow /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_empty

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 外部请求AXIS总线数据 -color Cyan -itemcolor Cyan /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/ae_ciph_tready_i

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 从FIFO读取数据 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_rd
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 从FIFO读取数据 -color Magenta -itemcolor Magenta /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_fifo_data

add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_tvalid
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_tlast
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ciph_axis_data
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 (127-0)
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_tdata
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 (131-128)-4
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_tkeep
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} -divider -height 21 (139-131)-8
add wave -noupdate -expand -group GCM128_AE_控制模块 -expand -group 密文缓存FIFO转换成AXIS总线 -expand -group 密文输出 -color {Spring Green} -itemcolor {Spring Green} /gcm256_2_tb/U_GCM256_AE_2/U_GCM128_AE_0/U_GCM128_AE_FLOW_CTRL/s_ae_ciph_tuser





TreeUpdate [SetDefaultTree]
WaveRestoreCursors {{Cursor 1} {18016389430 fs} 0}
quietly wave cursor active 1
configure wave -namecolwidth 357
configure wave -valuecolwidth 100
configure wave -justifyvalue left
configure wave -signalnamewidth 1
configure wave -snapdistance 10
configure wave -datasetprefix 0
configure wave -rowmargin 4
configure wave -childrowmargin 2
configure wave -gridoffset 0
configure wave -gridperiod 1
configure wave -griddelta 40
configure wave -timeline 0
configure wave -timelineunits ms
update
WaveRestoreZoom {17969946320 fs} {18150577900 fs}


```





















## systemverilog



### 1

```
	// 在检测到s_ae_plain_tready_o_512信号拉高时打印信号值
	always @(posedge clk_i) begin
		if (`s_ae_plain_tready_o_512 && `s_ae_plain_tvalid_i_512) begin
			$display("[%0t] 1-AE_PLAIN: Cnt_AE_plain = %0d, s_ae_plain_tready_o_512 = %h, s_ae_plain_tvalid_i_512 = %h, s_ae_plain_tlast_i_512 = %h, s_ae_plain_tkeep_i_512 = %h, s_ae_plain_tuser_i_512 = %h", 
					$realtime, 
					`Cnt_AE_plain,
					`s_ae_plain_tready_o_512,
					`s_ae_plain_tvalid_i_512,
					`s_ae_plain_tlast_i_512,
					`s_ae_plain_tkeep_i_512,
					`s_ae_plain_tuser_i_512);
			$display("s_ae_plain_tdata_i_512 Part 1: 0 - 127   = %h", `s_ae_plain_tdata_i_512[127:0]);
			$display("s_ae_plain_tdata_i_512 Part 2: 128 - 255 = %h", `s_ae_plain_tdata_i_512[255:128]);
			$display("s_ae_plain_tdata_i_512 Part 3: 256 - 383 = %h", `s_ae_plain_tdata_i_512[383:256]);
			$display("s_ae_plain_tdata_i_512 Part 4: 384 - 511 = %h", `s_ae_plain_tdata_i_512[511:384]);
		end
	end	// 在检测到s_ae_plain_tready_o_512信号拉高时打印信号值
	always @(posedge clk_i) begin
		if (`s_ae_plain_tready_o_512 && `s_ae_plain_tvalid_i_512) begin
			$display("[%0t] 1-AE_PLAIN: Cnt_AE_plain = %0d, s_ae_plain_tready_o_512 = %h, s_ae_plain_tvalid_i_512 = %h, s_ae_plain_tlast_i_512 = %h, s_ae_plain_tkeep_i_512 = %h, s_ae_plain_tuser_i_512 = %h", 
					$realtime, 
					`Cnt_AE_plain,
					`s_ae_plain_tready_o_512,
					`s_ae_plain_tvalid_i_512,
					`s_ae_plain_tlast_i_512,
					`s_ae_plain_tkeep_i_512,
					`s_ae_plain_tuser_i_512);
			$display("s_ae_plain_tdata_i_512 Part 1: 0 - 127   = %h", `s_ae_plain_tdata_i_512[127:0]);
			$display("s_ae_plain_tdata_i_512 Part 2: 128 - 255 = %h", `s_ae_plain_tdata_i_512[255:128]);
			$display("s_ae_plain_tdata_i_512 Part 3: 256 - 383 = %h", `s_ae_plain_tdata_i_512[383:256]);
			$display("s_ae_plain_tdata_i_512 Part 4: 384 - 511 = %h", `s_ae_plain_tdata_i_512[511:384]);
		end
	end将这段代码，变成写入文本文件里
```







ae_256_ciph_tready_mode 
ad_256_plain_tready_mode
ae_512_ciph_tready_mode 
ad_512_plain_tready_mode







```
				--模式一：连续读取
				if (ae_512_ciph_tready_mode = 0) then
			
					s_ae_ciph_exchange_tready_i_256 <= '1';
				
				--模式二：随机读取
				elsif (ae_512_ciph_tready_mode = 1) then
				

					if (s_ae_ciph_tready_cnt_512 = 0) then
					
						UNIFORM(v_seed1, v_seed2, v_rand);
						v_int_rand := integer(v_rand * 5.0);
						
						s_ae_ciph_tready_cnt_512_max <= v_int_rand;
						s_ae_ciph_tready_cnt_512     <= s_ae_ciph_tready_cnt_512 + 1;
						
					elsif (s_ae_ciph_tready_cnt_512 >= s_ae_ciph_tready_cnt_512_max) then
						s_ae_ciph_tready_cnt_512 <= 0;
						s_ae_ciph_exchange_tready_i_256   <= not s_ae_ciph_exchange_tready_i_256;
						
					else
						s_ae_ciph_tready_cnt_512 <= s_ae_ciph_tready_cnt_512 + 1;
					
					end if;
					
				else
				    null;
				end if;
```









plain_512_ram_mode

plain_512_mode





plain_512_ram_mode

plain_512_mode





ae_512_ciph_tready_mode

ad_256_plain_tready_mode





plain_256_ram_mode

plain_256_mode



ae_256_ciph_tready_mode

ad_512_plain_tready_mode









```
				--第一种模式：一直请求
				if (ae_512_ciph_tready_mode = 0) then

					s_ae_ciph_exchange_tready_i_256 <= 1;

				--第二种模式：随机请求
				elsif (ae_512_ciph_tready_mode = 1) then

```











xdma_0_ex.srcs/sources_1/protocol/protocol_ciph_data_buf.vhd





## 忽略掉仿真工程文件

sim/work/

vsim.wlf

sim/vsim.wlf









## 表达式

Cnt_\w+\s*=\s*0,















## vivado搜索







```
show_objects -name find_6 [get_nets -hierarchical -top_net_of_hierarchical_group -filter { NAME =~  "*F_s_pcie_clk_p_i*" || NAME =~  "*F_c_pcie_clk_p_i*" || NAME =~  "*sys_clk*" } ]
```







pipe_txoutclk_in





















# 2024年9月4日 12:23:34



iintel和HG有什么区别？







1. SN号读写功能的debug没有合成到SPU intel分支

> 当前是直接将sm2_dev最新的分支下载下来，打开SN号debug功能，然后用intel的顶层跑
>
> 其实只要约束一样就行了，但很可能有其他问题存在

2. SPU没有单独的EEPROM的debug工程，不能最大化节约时间

> 如果弄一个单独的工程的话，需要花时间去分析EEPROM程序



















































































